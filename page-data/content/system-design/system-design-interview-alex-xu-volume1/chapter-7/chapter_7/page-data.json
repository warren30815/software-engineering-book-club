{
    "componentChunkName": "component---node-modules-gatsby-theme-primer-wiki-src-templates-post-query-js",
    "path": "/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/",
    "result": {"data":{"mdx":{"id":"dcd70a35-a485-5cc2-ac70-9c18d2af419c","tableOfContents":{"items":[{"url":"#第七章設計可用於分散式系統的唯一-id-生成器","title":"第七章：設計可用於分散式系統的唯一 ID 生成器","items":[{"url":"#前言","title":"前言"},{"url":"#步驟一需求範圍確認","title":"步驟一：需求範圍確認"},{"url":"#步驟二high-level-架構","title":"步驟二：high-level 架構"},{"url":"#步驟三深入探討","title":"步驟三：深入探討"},{"url":"#步驟四總結","title":"步驟四：總結"},{"url":"#補充資料","title":"補充資料"}]}]},"fields":{"title":"第七章：設計可用於分散式系統的唯一 ID 生成器","slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","url":"https://warren30815.github.io/software-engineering-book-club/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","editUrl":"https://github.com/warren30815/software-engineering-book-club/tree/main/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7.md","lastUpdatedAt":"2023-07-07T03:07:23.000Z","lastUpdated":"7/7/2023","gitCreatedAt":"2023-06-22T13:53:44.000Z","shouldShowTitle":false},"frontmatter":{"title":"","description":null,"imageAlt":null,"tags":[],"date":null,"dateModified":null,"language":null,"seoTitle":null,"image":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"第七章設計可用於分散式系統的唯一-id-生成器\"\n  }, \"\\u7B2C\\u4E03\\u7AE0\\uFF1A\\u8A2D\\u8A08\\u53EF\\u7528\\u65BC\\u5206\\u6563\\u5F0F\\u7CFB\\u7D71\\u7684\\u552F\\u4E00 ID \\u751F\\u6210\\u5668\"), mdx(\"h2\", {\n    \"id\": \"前言\"\n  }, \"\\u524D\\u8A00\"), mdx(\"p\", null, \"\\u552F\\u4E00 ID \\u5728\\u7CFB\\u7D71\\u4E2D\\u5F88\\u91CD\\u8981\\uFF0C\\u5728\\u55AE\\u8CC7\\u6599\\u5EAB\\u4F3A\\u670D\\u5668\\u4E2D\\uFF0C\\u53EF\\u4EE5\\u5229\\u7528 primary key + \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"auto_increment\"), \" \\u5C6C\\u6027\\u4F86\\u5BE6\\u4F5C\\u552F\\u4E00 ID\\uFF0C\\u4F46\\u5728\\u5206\\u6563\\u5F0F\\u7CFB\\u7D71\\u4E2D\\uFF0C\\u6709\\u591A\\u8CC7\\u6599\\u5EAB\\u4F3A\\u670D\\u5668\\u9593\\u7684\\u540C\\u6B65\\u554F\\u984C\\uFF0C\\u672C\\u7BC7\\u6703\\u4ECB\\u7D39\\u56DB\\u7A2E\\u65B9\\u6CD5\\uFF0C\\u4EE5\\u53CA\\u5404\\u81EA\\u7684\\u512A\\u7F3A\\u9EDE\\u53CA\\u4F7F\\u7528\\u6642\\u6A5F\"), mdx(\"h2\", {\n    \"id\": \"步驟一需求範圍確認\"\n  }, \"\\u6B65\\u9A5F\\u4E00\\uFF1A\\u9700\\u6C42\\u7BC4\\u570D\\u78BA\\u8A8D\"), mdx(\"p\", null, \"Q: \\u552F\\u4E00 ID \\u9808\\u5177\\u5099\\u54EA\\u4E9B\\u6027\\u8CEA\"), mdx(\"p\", null, \"A: \\u9808\\u70BA\\u552F\\u4E00\\u4E14\\u53EF\\u4F9D\\u6642\\u9593\\u5148\\u5F8C\\u6392\\u5E8F\"), mdx(\"p\", null, \"Q: \\u65B0\\u751F\\u6210\\u7684 ID\\uFF0C\\u662F\\u5426\\u70BA\\u4E0A\\u4E00\\u500B ID + 1\"), mdx(\"p\", null, \"A: ID \\u9700\\u96A8\\u6642\\u9593\\u56B4\\u683C\\u905E\\u589E\\uFF0C\\u4F46\\u4E0D\\u4E00\\u5B9A\\u9700\\u8981\\u7D55\\u5C0D\\u5DEE\\u8DDD 1\"), mdx(\"p\", null, \"Q: ID \\u662F\\u5426\\u5168\\u70BA\\u6578\\u5B57\\uFF0C\\u9084\\u662F\\u53EF\\u4EE5\\u6709\\u6587\\u5B57\"), mdx(\"p\", null, \"A: \\u9700\\u5168\\u70BA\\u6578\\u5B57\"), mdx(\"p\", null, \"Q: ID \\u7684\\u9577\\u5EA6\\u6709\\u9650\\u5236\\u55CE\"), mdx(\"p\", null, \"A: \\u9700\\u70BA 64 bits\"), mdx(\"p\", null, \"Q: \\u7CFB\\u7D71\\u7684\\u898F\\u6A21\\u6709\\u591A\\u5927\"), mdx(\"p\", null, \"A: \\u6BCF\\u79D2\\u9700\\u8981\\u80FD\\u7522\\u751F 10,000 IDs\"), mdx(\"h2\", {\n    \"id\": \"步驟二high-level-架構\"\n  }, \"\\u6B65\\u9A5F\\u4E8C\\uFF1Ahigh-level \\u67B6\\u69CB\"), mdx(\"p\", null, \"\\u56DB\\u7A2E\\u5206\\u6563\\u5F0F\\u7CFB\\u7D71\\u4E2D\\u552F\\u4E00 ID \\u7684\\u8A2D\\u8A08\\u65B9\\u6CD5\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Multi-master replication\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Universally unique identifier (UUID)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Ticket server\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Twitter snowflake approach\")), mdx(\"h3\", {\n    \"id\": \"multi-master-replication\"\n  }, \"Multi-master replication\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/709cb/multi_master.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"57.14285714285714%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACKUlEQVQoz22TS29NURiGzw/wH/wLMwMzU0NmBvgDBhKhA0LEQGLgMmwiRKqRagTV0A6kaSptmqJVreN0d1/Ode999n3dHllnH0X5knd965Z3fZd3NXKl+OQMeLHS4tWaQ5xVjMwYfpupYWovtSYsBYkwpAKiUpJUdi1oaAx3Zjc5fmWOk9ffMb/uIpUkSlI8PyCMIqRSCFmjEhI/LSikwU8C9mOHVFT0CkFUjgmvPlnnyJkpjl6YYfGzj5CCYDDE7Yb4/Zh2mIzQH2Zsuz2a/YxSDphav8bjtct8760gNHhZSaM0muUtn1vTa9x7uUE3zv+T8q+0oVKCVMJHZ5ab709x98NZnm3cqCO2hGklOWw2RfMnoTEHMEaRa9jsLnJ/+RyTqxeZ23lAoQztvKJRas3KToeHb7eYXPhGENYR5nlOGA4I4yGlkOSloKgEzXbIdjsk8By8YA/P36PddknLisASCjS3Z75w7NJrTkzM82bNIS1Kfvhddh2P/U6f3jCjG6WESU6clzQHMa19l5br03Rc9lyfdpKNGtMwGCZsU04/5ej55yxttUcR2o7+U8axCa0ZKkOiDKkyDJUmE4pMSBrSaFabHR4tfGV6aZd+kqOMobJSsdAaZetqQGpDaaWjFEqpAznZud2zWmwYbQ69Xr9kUSpNL4ppeT5Br09nEJLL+ryQ9Z3U1ne8to1s2EFrg1J6hIM8x77Ic3zPIwpD8jz7++cckpUl/AnMWTeBUtySMgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"multi master\",\n    \"title\": \"multi master\",\n    \"src\": \"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/410f3/multi_master.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/0d3e1/multi_master.png 140w\", \"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/6b1e2/multi_master.png 281w\", \"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/410f3/multi_master.png 561w\", \"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/99072/multi_master.png 842w\", \"/software-engineering-book-club/static/e7f48004666e67dfb2d89006f673ca28/709cb/multi_master.png 1034w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u5982\\u5716\\uFF0C\\u9084\\u662F\\u5229\\u7528\\u8CC7\\u6599\\u5EAB\\u7684 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"auto_increment\"), \" \\u529F\\u80FD\\uFF0C\\u53EA\\u662F\\u4E0D\\u662F + 1\\uFF0C\\u800C\\u662F\\u6BD4\\u5982\\u6709 k \\u500B\\u8CC7\\u6599\\u5EAB\\u5C31 + k\\uFF0C\\u5716\\u4E2D k = 2\"), mdx(\"p\", null, \"\\u7F3A\\u9EDE\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u591A\\u500B\\u8CC7\\u6599\\u4E2D\\u5FC3\\u4E0B\\u5F88\\u96E3\\u64F4\\u5145\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"ID \\u7684\\u503C\\u4E0D\\u4E00\\u5B9A\\u96A8\\u8457\\u6642\\u9593\\u56B4\\u683C\\u905E\\u589E\\uFF0C\\u6BD4\\u5982\\u6709\\u4E00\\u53F0\\u7522\\u751F\\u8F03\\u591A\\uFF0C\\u4E00\\u53F0\\u7522\\u751F\\u8F03\\u5C11\\uFF0C\\u90A3\\u5F8C\\u8005\\u7522\\u751F\\u51FA\\u7684 ID \\u6578\\u503C\\u5373\\u4F7F\\u751F\\u6210\\u6642\\u9593\\u8F03\\u665A\\uFF0C\\u4F46 ID \\u6578\\u503C\\u4ECD\\u6703\\u5C0F\\u65BC\\u524D\\u8005\\u751F\\u6210\\u8F03\\u65E9\\u7684 ID\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5F88\\u96E3 auto-scale \\u4F3A\\u670D\\u5668\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u96E2\\u7DDA\\u6642\\u7121\\u6CD5\\u4F7F\\u7528\")), mdx(\"h3\", {\n    \"id\": \"uuiduniversally-unique-identifier\"\n  }, \"UUID\\uFF08Universally Unique Identifier\\uFF09\"), mdx(\"p\", null, \"UUID \\u662F\\u4E00\\u500B\\u80FD\\u7522\\u751F 128 bits ID \\u7684\\u6F14\\u7B97\\u6CD5\\uFF0C\\u6709\\u8457\\u6975\\u5C0F\\u7684\\u78B0\\u649E\\u6982\\u7387\\uFF0C\\u6BCF\\u79D2\\u7522\\u751F 10 \\u5104\\u500B UUID \\u7684\\u60C5\\u6CC1\\u4E0B\\u6301\\u7E8C 100 \\u5E74\\uFF0C\\u53EA\\u6709 50% \\u7684\\u6A5F\\u7387\\u6703\\u78B0\\u649E\"), mdx(\"p\", null, \"\\u4E00\\u500B UUID \\u7684\\u7BC4\\u4F8B\\uFF1A\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"09c93e62-50b4-468d-bf8a-c07e1040bfb2\"), \"\\uFF0C32 \\u500B 16 \\u9032\\u4F4D\\u7684\\u5B57\\u5143\\uFF0C\\u6240\\u4EE5\\u70BA 128 bits (32 \", \"*\", \" 4)\"), mdx(\"p\", null, \"\\u56E0\\u70BA\\u6709\\u8457\\u6975\\u4F4E\\u7684\\u78B0\\u649E\\u6982\\u7387\\uFF0C\\u56E0\\u6B64\\u53EF\\u4EE5\\u6BCF\\u500B\\u4F3A\\u670D\\u5668\\u90FD\\u8DD1\\u81EA\\u5DF1\\u7684 UUID \\u751F\\u6210\\u5668\\uFF0C\\u5982\\u4E0B\\u5716\\uFF1A\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/01a87/uuid.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"31.428571428571427%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/klEQVQY001Q7XLDMAjL+79ms2aJ8+EYG7AbTztIu9sPTmchZNBwiqCoQtsLrBWs+ofSGqRWZBZkZqi9W0MRBdeKIuJvfXPmNayJcOw75nlGjBFcCkrOOI7DuTNGpPPEvm1Y1xUhBOSckYlARAhhcZ5Swk6E4XgPL8uCI0YUZuRS3Nw4w2Tifce2bQjrehvm7IZmZuUaymZYIFzwNY7+S7VT7TwRjI+Hc5+tbcvvaUKtFczsWuOm5xNNFeY1JMtDFVQYWcSz4do811TY0fNS9T4xe8ZSm/PEN+d6VQyv3lGvC+268X+13j348TlhDsEHX/3n3e9oH93VodcF8/oFEyDOsrghCJUAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"uuid\",\n    \"title\": \"uuid\",\n    \"src\": \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/410f3/uuid.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/0d3e1/uuid.png 140w\", \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/6b1e2/uuid.png 281w\", \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/410f3/uuid.png 561w\", \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/99072/uuid.png 842w\", \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/62a6a/uuid.png 1122w\", \"/software-engineering-book-club/static/1b5b9e3aa7525f6787c69077f47e5ac0/01a87/uuid.png 1288w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u8A3B\\uFF1Auuid \\u6F14\\u7B97\\u6CD5\"), mdx(\"hr\", null), mdx(\"p\", null, \"\\u5206\\u6210 v1 \\uFF5E v5\\uFF0C\\u6839\\u64DA uuid.js \\u7D71\\u8A08\\u6709 77% \\u4F7F\\u7528\\u8005\\u9078\\u64C7 v4\\uFF1B21% \\u4F7F\\u7528\\u8005\\u9078\\u64C7 v1\\uFF0C\\u6709\\u7279\\u6B8A\\u9700\\u6C42\\u624D\\u6703\\u9078 v5 & v3\\uFF0Cv2 \\u57FA\\u672C\\u4E0A\\u4E0D\\u63A1\\u7528 (\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://yuanchieh.page/posts/2020/2020-12-01-uuid-%E5%8E%9F%E7%90%86%E8%88%87%E5%AF%A6%E4%BD%9C%E5%88%86%E6%9E%90-%E8%A9%B2%E5%A6%82%E4%BD%95%E6%8C%91%E9%81%B8%E9%81%A9%E5%90%88%E7%9A%84-uuid-%E7%89%88%E6%9C%AC/\"\n  }, \"ref1\"), \")\\uFF0C\\u4F7F\\u7528\\u6642\\u6A5F\\u53EF\\u5927\\u7565\\u5206\\u70BA (\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/questions/20342058/which-uuid-version-to-use\"\n  }, \"ref2\"), \"\\u3001\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.uuidtools.com/uuid-versions-explained\"\n  }, \"ref3\"), \")\\uFF1A\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u53EA\\u662F\\u55AE\\u7D14\\u9700\\u8981\\u4E00\\u500B\\u96A8\\u6A5F\\u4E0D\\u91CD\\u8907\\u7684 uuid\"), \"\\uFF1Av4\\uFF0C\\u6703\\u5F9E\\u8D85\\u904E 5.3 x 10^36 \\u7A2E\\u53EF\\u80FD\\u7684 uuid \\u88E1\\u9762\\u96A8\\u6A5F\\u751F\\u6210\\u51FA\\u4E00\\u500B\\uFF0C\\u5206\\u70BA\\u5169\\u500B\\u8B8A\\u5316\\u7248\\uFF0Cvariant-1 \\u70BA Minecraft \\u4E2D\\u4F7F\\u7528\\u7684\\u6F14\\u7B97\\u6CD5\\uFF1Bvariant-2 \\u5373 Microsoft \\u7CFB\\u7D71\\u5167\\u7684 GUID \", \"[ref3]\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u9700\\u8981\\u5728\\u524D\\u8005\\u7684\\u57FA\\u790E\\u4E0A\\u77E5\\u9053\\u6642\\u9593\\u8CC7\\u8A0A\\uFF08\\u7CBE\\u5EA6\\u5230 100 nanoseconds\\uFF09\\u548C\\u662F\\u54EA\\u53F0\\u6A5F\\u5668\\u7522\\u751F\\u7684\"), \"\\uFF1Av1\\uFF0C\\u683C\\u5F0F\\u898B\\u4E0B\\u5716\\uFF0C\\u524D\\u4E09\\u7D44\\u70BA\\u6642\\u9593\\u8CC7\\u8A0A\\uFF0C\\u8868\\u793A\\u5F9E 1582-10-15 00:00:00 \\u5230\\u73FE\\u5728\\u7D93\\u904E\\u4E86\\u591A\\u5C11\\u500B 100 ns (\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/questions/3795554/extract-the-time-from-a-uuid-v1-in-python\"\n  }, \"ref4\"), \")\\uFF0Clow time \\u4EE3\\u8868\\u7B97\\u51FA\\u7684\\u9593\\u9694\\u7684\\u6700\\u5F8C 32 bits\\uFF1Bmid time \\u70BA\\u4E2D\\u9593 16 bits\\uFF1B\\u7B2C\\u4E09\\u9805\\u70BA\\u7248\\u672C\\u8CC7\\u8A0A + \\u958B\\u982D 16 bits\\uFF1B\\u7B2C\\u56DB\\u9805\\u70BA variant \\u7DE8\\u865F + system clock \\u503C\\uFF1B\\u7B2C\\u4E94\\u9805\\u70BA\\u7DB2\\u5361\\u7684 mac address\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/2fc9dc14eb8a309ea7de0eb09f31db47/6af66/uuid_v1.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"72.14285714285715%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACNklEQVQ4y42SWW/aQBSF/f/f+9A+V3nqD2gbHlAWEZTakFIgYQsYY7xveAEv81V2yCLRVBnp6N65mjk6Z85IQlTUazKZ0Gqdc319Rb/fR1EUut0uf4ZD5osFnU6nmcuKwng8QlFkZPkJtm2JmkMIkUllVSEEeJ7P41JF3xr1AbSNhrZeY+gbPNfGME02qxW6puE4LsvHJfPZAm29IYkTUZWCqqoySbNirn5v6QwtLgcOqhEyVAe0h5e4vgHaLegy2XRC3moRj+6ZjTxGHZ1pz2bWt+i1V+Lm+wx14mbS2oy5m7ncjm1uhhZzzWWsDpHnd5j6HB5vKLUe0cM9SbtN8DBlMrB4kDfcyzqT/pbpnSGGXQ1LizLJ8FLavQ27OCXcpQRhRJImHIoDVVlAsUeUOaIoqNK0qUVeku8LDjWygnxfiroviyqTVDPh7KdKFAWEYYBlWYRh2AQljvjAej6WSaq94uziK47tEEYRjuOw2+04pvZRiGPNJD+0UQYX+J5Pmqb4vv9CeCLjDcnz/lhfFeIt4NcXbNdD07SGsLZdwzRNDMNA13Vs2z4hf9O/Eha2QXxxzi6Om7erVSZJ0iDLsgZxHDfz/X5PnudPZO9ZLhZz4s+fiOIY13FwXZf1es1qtWpU1spq1Erref3Gb9WdhGJoO358m+H73omt/4Vahi5R4OMHAVEUidrF4XDIpMBO+H25xPXchvAjqTaErom11dkaRu1E1HfTNM2k99J8X5z41998sfwXy+4ot0StG88AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"uuid v1\",\n    \"title\": \"uuid v1\",\n    \"src\": \"/software-engineering-book-club/static/2fc9dc14eb8a309ea7de0eb09f31db47/410f3/uuid_v1.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/2fc9dc14eb8a309ea7de0eb09f31db47/0d3e1/uuid_v1.png 140w\", \"/software-engineering-book-club/static/2fc9dc14eb8a309ea7de0eb09f31db47/6b1e2/uuid_v1.png 281w\", \"/software-engineering-book-club/static/2fc9dc14eb8a309ea7de0eb09f31db47/410f3/uuid_v1.png 561w\", \"/software-engineering-book-club/static/2fc9dc14eb8a309ea7de0eb09f31db47/6af66/uuid_v1.png 640w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u8981 decode \\u51FA\\u6642\\u9593\\u7684\\u8A71\\uFF0C\\u53EF\\u53C3\\u8003\\u8A72 python code (\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/questions/17571100/how-to-extract-timestamp-from-uuid-v1-timeuuid-using-javascript\"\n  }, \"ref5\"), \"):\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/3d22e/uuid_v1_decode.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"47.142857142857146%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz4WSyW4bMRBE/f8/52y2Yo1mJ2cR1yE5S+LDC0QhMCIE8KFQh25WVxX4tG0b0zRRd4LiUtG2LXI2nNuRqpPUVYloK7TRxBhJKXF7s65r5kc85cG64kOiF5Ln5y9UdYMQgnEYULLB9mecGnHWEOMngh/Dlff338xXxcvpJ13bYCaJ1zPRKYK5EhZPSuvngveFjRgCY1tSViWDlFg1k7adbd/Ztr/4ELvxI3LkFCPaR5pRY7s3luGCUxNyGJivVxY14o3OR/8n8o/g7dJVKbTWGGNYQsQukasNuCWijcX5hRAC+75nZMf78eD8jixojaGTI2XdcLkUlK2glIK+PSOL70z1ibmvGceRXgjUPOHVgBtqnCjQ1Td0+RU3NvfI+7bhwkojZ05FTXN+ZZQtsjohix8M5SuTFEgp6eWAnXpM94YzihQ8abGkxRGDvzv03ud4ygXMkohOExeH9QvWeYx1+bscx5Gx7wf78Svzlms4cgW3Ov4AcOapduowTS0AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"uuid v1 decode\",\n    \"title\": \"uuid v1 decode\",\n    \"src\": \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/410f3/uuid_v1_decode.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/0d3e1/uuid_v1_decode.png 140w\", \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/6b1e2/uuid_v1_decode.png 281w\", \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/410f3/uuid_v1_decode.png 561w\", \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/99072/uuid_v1_decode.png 842w\", \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/62a6a/uuid_v1_decode.png 1122w\", \"/software-engineering-book-club/static/b944190f121046575ef97d370c7d4f96/3d22e/uuid_v1_decode.png 2010w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u9700\\u8981\\u80FD\\u6839\\u64DA namespace + input \\u7522\\u751F reproducible \\u7684 uuid\"), \"\\uFF1A\\u7528 v3 \\u6216 v5\\uFF0Cv3 \\u5C07 input \\u7528 MD5 hash\\uFF1Bv5 \\u7528 SHA-1 hash\\uFF0C\\u6240\\u4EE5 v5 \\u8F03 v3 \\u5B89\\u5168\"), mdx(\"p\", null, \"namespace \\u53EF\\u4EE5\\u8996\\u70BA\\u4F60\\u7684 key \\u7684\\u6982\\u5FF5\\uFF0C\\u7BC4\\u4F8B\\u53EF\\u898B \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/questions/10867405/generating-v5-uuid-what-is-name-and-namespace\"\n  }, \"ref6\")), mdx(\"p\", null, \"Recap (\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/questions/10867405/generating-v5-uuid-what-is-name-and-namespace\"\n  }, \"ref6\"), \")\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/e4900/uuid_recap.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"33.57142857142858%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABP0lEQVQoz2WR2Y6DMAxF+f+fY6ZQyhqSAknIwvJStarUO7LR8DATycqi3ONrO1FKIc+vmKYJxlp0nYCxM25ljabtcC1KNE2H2XlIece1uKGsamhjMWkNrTVrKB6PB5IQI5S6Y9s2bNsO7wOWdUMvFUQvUTct2q5n4KQN2k6gbQX/I82+74gxwnuP5/OJREqFNP3iDOSS9r7vEUJA+p0h/bpwEHwcJxhjIESPW1ky8O9KiDyOI5Zl4Wx0X9cVPkR2KdWAXt7h3PEel4XP5Or1ejHk8/mckRAsy3IMwwDnHKRSMMaiqltcshxl1SDLCzgfjj4byy0it+/3+wSeDq21EILK1VwmlUQi6hFBi7LmIQ3jCOcPZ5SYjGhjTtjvntBkq6oCgUmgtWHBum3HADqBGBdO5EPglsyzY7fzPP8D/gB7pwisOCcq+gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"uuid recap\",\n    \"title\": \"uuid recap\",\n    \"src\": \"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/410f3/uuid_recap.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/0d3e1/uuid_recap.png 140w\", \"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/6b1e2/uuid_recap.png 281w\", \"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/410f3/uuid_recap.png 561w\", \"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/99072/uuid_recap.png 842w\", \"/software-engineering-book-club/static/b9d78778c02468be275160cd881df6df/e4900/uuid_recap.png 988w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"hr\", null), mdx(\"p\", null, \"\\u512A\\u9EDE\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u7C21\\u55AE\\uFF0C\\u4E0D\\u7528\\u8003\\u616E\\u4F3A\\u670D\\u5668\\u9593\\u7684\\u540C\\u6B65\\u554F\\u984C\\uFF0C\\u4E14\\u96E2\\u7DDA\\u6642\\u4E5F\\u80FD\\u4F7F\\u7528\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u627F\\u4E0A\\uFF0C\\u9AD8\\u64F4\\u5C55\\u6027\")), mdx(\"p\", null, \"\\u7F3A\\u9EDE\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"128 bits \\u592A\\u9577\\uFF0C\\u6D6A\\u8CBB\\u7A7A\\u9593\\u4E14\\u4E0D\\u7B26\\u5408\\u4E00\\u958B\\u59CB\\u7684\\u9700\\u6C42\\uFF0864 bits\\uFF09\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"ID \\u4E0D\\u96A8\\u8457\\u6642\\u9593\\u56B4\\u683C\\u905E\\u589E\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"ID \\u5167\\u6709\\u975E\\u6578\\u5B57\\u7684\\u503C\\uFF0C\\u4E0D\\u7B26\\u5408\\u4E00\\u958B\\u59CB\\u7684\\u9700\\u6C42\\uFF08\\u9700\\u5168\\u70BA\\u6578\\u5B57\\uFF09\")), mdx(\"h3\", {\n    \"id\": \"ticket-server\"\n  }, \"Ticket Server\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/3c492/ticket_server.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"42.142857142857146%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBklEQVQoz2VSCZKEIBDz/+/0Wi9uFEGzlXacdWeoSmGnQzpYVD5GGOfggr/guQdoY6T2IWDRWkCetbFWetY70ZNTxiCmhIoi5xzatsU4DEgpwTsHrZRw0zTBWotlWTAMA7quE33wHuu6ou/7i7MWKw3jtsEzlXMYp0mSbS/OGCNgj6Apd/YCUyklA+/+tu+o9lJwnqeglCJTKaZpzllqrhijGN3DyPM2x3EIeJ5eb8Ob5OI3DzDdPM9yVSZ5mtza59kvwxtcTMcrNU2Duq7lP+77/h74TPbPMJX8ZciaSRalJKXWWnZyn9on6FXlUpByluIPF+dixM84ypPh87p05UP7Qs6g1y+VzG2qLgcbkwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ticket server\",\n    \"title\": \"ticket server\",\n    \"src\": \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/410f3/ticket_server.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/0d3e1/ticket_server.png 140w\", \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/6b1e2/ticket_server.png 281w\", \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/410f3/ticket_server.png 561w\", \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/99072/ticket_server.png 842w\", \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/62a6a/ticket_server.png 1122w\", \"/software-engineering-book-club/static/041a0214a66d74e6cbe5d8e51ae2388b/3c492/ticket_server.png 1300w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u5982\\u5716\\uFF0CID \\u7684\\u767C\\u653E\\u7D71\\u4E00\\u7531\\u3127\\u4F3A\\u670D\\u5668\\u8CA0\\u8CAC\"), mdx(\"p\", null, \"\\u512A\\u9EDE\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u53EF\\u9054\\u6210 ID \\u9700\\u70BA\\u5168\\u6578\\u5B57\\u7684\\u9700\\u6C42\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5BB9\\u6613\\u5BE6\\u4F5C\\uFF0C\\u9069\\u7528\\u65BC\\u5C0F\\u81F3\\u4E2D\\u578B\\u7CFB\\u7D71\")), mdx(\"p\", null, \"\\u7F3A\\u9EDE\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Single point of failure\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u96E2\\u7DDA\\u6642\\u7121\\u6CD5\\u4F7F\\u7528\")), mdx(\"h3\", {\n    \"id\": \"twitter-snowflake-approach\"\n  }, \"Twitter snowflake approach\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/248b0/snowflake.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"17.142857142857142%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbklEQVQI13WOCwrAIAxDvf9R/Yv4RzNS2BiDCYXapK9R3nvUWjHnRO8dxhiUUuQ/xpBKKSHGKL1zTnT2ay3knGGtffyK5r03+AjUWiOEgHOOzLjAI5wRduv0EsRA1FtrAlXvJN+6UxPAw3++t/8CEcXoUUiWgJMAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"snowflake\",\n    \"title\": \"snowflake\",\n    \"src\": \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/410f3/snowflake.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/0d3e1/snowflake.png 140w\", \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/6b1e2/snowflake.png 281w\", \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/410f3/snowflake.png 561w\", \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/99072/snowflake.png 842w\", \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/62a6a/snowflake.png 1122w\", \"/software-engineering-book-club/static/0b333629170a27417454d60d9979c926/248b0/snowflake.png 1316w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u5C07 64 bits \\u5206\\u6210\\u5E7E\\u500B\\u5340\\u584A\\uFF0C\\u6709\\u9EDE\\u50CF\\u662F\\u7DB2\\u8DEF\\u5C01\\u5305 header \\u7684\\u505A\\u6CD5\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7B26\\u865F bit\\uFF1A1 bit\\uFF0C\\u4E8C\\u9032\\u4F4D\\u4E2D 0 \\u4EE3\\u8868\\u6B63\\uFF0C1 \\u4EE3\\u8868\\u8CA0\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6642\\u9593\\u6233\\u8A18\\uFF1A41 bits\\uFF0C\\u5C07\\u6BEB\\u79D2\\u7B49\\u7D1A\\u7684 unix timestamp \\u8F49\\u70BA\\u4E8C\\u9032\\u4F4D\\uFF0C\\u6B64\\u65B9\\u5F0F\\u53EF\\u7528\\u5230 2039 \\u5E74 41 bits \\u624D\\u6703\\u4E0D\\u5920\\u7528\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8CC7\\u6599\\u4E2D\\u5FC3 ID\\uFF1A5 bits\\uFF0C\\u4E0A\\u9650 2 ^ 5 = 32 \\u500B\\u8CC7\\u6599\\u4E2D\\u5FC3\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6A5F\\u5668 ID\\uFF1A5 bits\\uFF0C\\u4E00\\u500B\\u8CC7\\u6599\\u4E2D\\u5FC3\\u4E0A\\u9650 2 ^ 5 = 32 \\u53F0\\u6A5F\\u5668\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6D41\\u6C34\\u865F\\uFF1A12 bits\\uFF0C\\u70BA\\u4E86\\u8655\\u7406\\u9AD8\\u4F75\\u767C\\u72C0\\u6CC1\\uFF0C\\u4E00\\u6BEB\\u79D2\\u5167\\uFF08\\u56E0\\u4E0A\\u9762\\u6642\\u9593\\u6233\\u8A18\\u7684\\u7CBE\\u5EA6\\u662F\\u6BEB\\u79D2\\uFF09\\u53EF\\u80FD\\u6703\\u540C\\u6642\\u7522\\u751F\\u4E00\\u5806 UUID\\uFF0C\\u56E0\\u6B64\\u4E00\\u6BEB\\u79D2\\u5167\\u7522\\u751F\\u7684\\u4E0D\\u540C UUID\\uFF0C\\u6D41\\u6C34\\u865F\\u6703\\u4EE5 + 1 \\u7684\\u65B9\\u5F0F\\u5340\\u5206\\uFF0C\\u6B64\\u6B04\\u4F4D\\u6BCF\\u6BEB\\u79D2\\u6703\\u91CD\\u7F6E\"))), mdx(\"h2\", {\n    \"id\": \"步驟三深入探討\"\n  }, \"\\u6B65\\u9A5F\\u4E09\\uFF1A\\u6DF1\\u5165\\u63A2\\u8A0E\"), mdx(\"p\", null, \"\\u7531\\u4E0A\\u53EF\\u77E5\\uFF0C\\u6700\\u7B26\\u5408\\u9700\\u6C42\\u7684\\u662F Twitter snowflake approach\\uFF0C\\u56E0\\u6B64\\u6211\\u5011\\u4F86\\u63A2\\u8A0E\\u5176\\u76F8\\u95DC\\u7D30\\u7BC0\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7B26\\u865F bit\\uFF1A\\u6B63\\u5E38\\u60C5\\u6CC1 ID \\u70BA\\u6B63\\u6578\\uFF0C\\u56E0\\u6B64\\u57FA\\u672C\\u4E0A\\u6B64 bit \\u90FD\\u70BA 0\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6642\\u9593\\u6233\\u8A18\\uFF1A\\u4E0A\\u8FF0\\u6709\\u63D0\\u5230\\u5230 2039 \\u5E74 41 bits \\u6703\\u4E0D\\u5920\\u7528\\uFF0C\\u56E0\\u6B64 twitter \\u5BE6\\u52D9\\u4E0A\\u6B64\\u6B04\\u4F4D\\u7684\\u6642\\u9593\\u662F\\u70BA\\u8DDD\\u516C\\u53F8\\u5275\\u7ACB\\u6642\\u7D93\\u904E\\u7684\\u76F8\\u5C0D\\u6642\\u9593\\uFF0C\\u5982\\u4E0B\\u5716\\uFF1A\"))), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/01a87/twitter_time.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"89.28571428571428%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVQ4y41UDW+jMAzl//+5O63dtOmuahkfhVIIawIkIcmb7I4r69G1Rk9ObHBsP4coLXbY1SvE9RqpeEVcPyMVb3hvnpG3f9iXNC/sI2yrFT5e95DJDr1ZY7ut8Ot3j6cnidVaIZJ9h49OQg4KcujOuu/QdhKd7tmm2H7WQp1gtYWzFt5rGDNiGDy0dowohADnJnh4H2BHBzUYjKODMZa18xc/P4EAAOEbouD9l/MC5xy6QaOqKiRJgrYV9CU8v+tZ30J02QTW05mDHc/rEL4ChW8fzu1zRNOCnQC01sj3e7xnOQ5lia7r/mV3jfkhywFD4ICNEBCiRdu2MMbglvyY4RT0XCagmRDNGQ7DwJoOIAghoJR6LEPSdhzRa4O6rpGmKYqiwOFwYJ3nOYMCz1vxY4Yk2jrck7ukkFBpfzcbbHYx4jjm8kholOgd0tP6oZLHcYSUClIp7h3tb8nS6ETX/QPON6A3FtZaDiqlRN/3DKrgdDox+0vzGC3NFJUkux5lUaAsS2RZxiBSiCiykV4MuESI854zvCeLJU9ZkTRNwyOR5TniJMPxWPGe7NdXb4nh/0qmvlDPjscjs0ugm0PELAVc/DnMo09CAWmQiYR5eY/gE+LUf/kpaC1HAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"twitter time\",\n    \"title\": \"twitter time\",\n    \"src\": \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/410f3/twitter_time.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/0d3e1/twitter_time.png 140w\", \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/6b1e2/twitter_time.png 281w\", \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/410f3/twitter_time.png 561w\", \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/99072/twitter_time.png 842w\", \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/62a6a/twitter_time.png 1122w\", \"/software-engineering-book-club/static/02c0698c88c291c114f387023674d998/01a87/twitter_time.png 1288w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8CC7\\u6599\\u4E2D\\u5FC3 ID\\uFF1A\\u57FA\\u672C\\u4E0A\\u4E0D\\u6703\\u7528\\u5230\\u9019\\u9EBC\\u591A\\u8CC7\\u6599\\u4E2D\\u5FC3\\uFF0C\\u56E0\\u6B64\\u53EF\\u6E1B\\u5C11 bit \\u6578\\u7D66\\u5176\\u4ED6\\u4EBA\\u7528\\uFF0C\\u6216\\u8005\\u53EA\\u6709\\u55AE\\u4E00\\u500B\\u8CC7\\u6599\\u4E2D\\u5FC3\\u7684\\u60C5\\u6CC1\\u4E0B\\uFF0C\\u53EF\\u66FF\\u63DB\\u70BA table \\u7684\\u7DE8\\u865F\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6A5F\\u5668 ID\\uFF1A\\u540C\\u4E0A\\uFF0C\\u96A8\\u8457\\u81EA\\u8EAB\\u696D\\u52D9\\u60C5\\u6CC1\\u8ABF\\u6574 bit \\u6578\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6D41\\u6C34\\u865F\\uFF1A\\u7528\\u4E86 12 bits\\uFF0C\\u6BCF\\u6BEB\\u79D2\\u53EF\\u7522\\u751F 2 ^ 12 = 4096 \\u500B UUID\\uFF0C\\u9700\\u6C42\\u70BA\\u6BCF\\u79D2 10,000 \\u500B UUID \\u800C\\u5DF2\\uFF0C\\u56E0\\u6B64\\u9019\\u90E8\\u5206\\u7684 bits \\u6578\\u4E5F\\u53EF\\u4EE5\\u8003\\u616E\\u632A\\u9EDE\\u7D66\\u5225\\u4EBA\\u7528\"))), mdx(\"h2\", {\n    \"id\": \"步驟四總結\"\n  }, \"\\u6B65\\u9A5F\\u56DB\\uFF1A\\u7E3D\\u7D50\"), mdx(\"p\", null, \"\\u5EF6\\u4F38\\u53EF\\u8A0E\\u8AD6\\u7684\\u9EDE\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Clock synchronization\\uFF1A\\u4E0D\\u540C\\u7684\\u6A5F\\u5668\\u7684 system clock \\u4E0D\\u4E00\\u5B9A\\u6703\\u5C0D\\u9F4A\\uFF0C\\u56E0\\u6B64\\u5BE6\\u52D9\\u4E0A\\u7684\\u89E3\\u6CD5\\u662F\\u90FD\\u8DDF NTP \\u4F3A\\u670D\\u5668\\u5C0D\\u6642\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Section length tuning\\uFF1A\\u5982\\u4E0A\\u8A0E\\u8AD6\\u904E\\u7684\\uFF0Csnowflake \\u65B9\\u6CD5\\u6BCF\\u500B\\u6B04\\u4F4D\\u9700\\u8981\\u591A\\u5C11 bit \\u7684\\u53D6\\u6368\\uFF0C\\u6E1B\\u5C11\\u6D41\\u6C34\\u865F\\u6B04\\u4F4D\\u7684 bit \\u7528\\u91CF\\u800C\\u591A\\u5206\\u914D\\u7D66 timestamp \\u6B04\\u4F4D\\uFF0C\\u96D6\\u6703\\u964D\\u4F4E\\u4F75\\u767C\\u80FD\\u529B\\uFF0C\\u4F46\\u80FD\\u5EF6\\u5F8C\\u6642\\u9593 overflow\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"High availability\\uFF1AID \\u751F\\u6210\\u5668\\u5F88\\u91CD\\u8981\\uFF0C\\u8A2D\\u8A08\\u4E0A\\u9700\\u8003\\u616E\\u597D\\u5982\\u4F55\\u4FDD\\u8B49\\u9AD8 availability\"))), mdx(\"h2\", {\n    \"id\": \"補充資料\"\n  }, \"\\u88DC\\u5145\\u8CC7\\u6599\"), mdx(\"p\", null, \"\\u4E00\\u500B\\u7C21\\u55AE\\u751F\\u6210\\u53EF\\u6392\\u5E8F\\u7684\\u5206\\u6563\\u5F0F global uuid \\u6F14\\u7B97\\u6CD5 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/rs/xid\"\n  }, \"xid\")), mdx(\"p\", null, \"\\u4E00\\u500B xid \\u7684\\u7BC4\\u4F8B\\uFF1A\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"9m4e2mr0ui3e8a215n4g\"), \"\\uFF0C\\u53EF\\u4EE5\\u770B\\u5230\\u6BD4 UUID \\u7C21\\u6F54\\u591A\\u4E86\\uFF08\\u96D6\\u7136\\u6642\\u9593\\u7CBE\\u5EA6\\u53EA\\u5230\\u79D2\\uFF09\"), mdx(\"p\", null, \"\\u5176\\u662F\\u57FA\\u65BC Mongo Object ID algorithm \\u751F\\u6210\\u7684\\u5B57\\u4E32\\uFF0CMongo Object ID \\u57FA\\u672C\\u4E0A\\u683C\\u5F0F\\u5982\\u4E0B\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"0|1|2|3     4|5|6    7|8|      9|10|11\\n\\nTimestamp  machine   PID   Increment counter\\n\")), mdx(\"p\", null, \"\\u518D\\u7D93\\u7531 base32hex (base32 \\u7684 variant \\u7248\\u672C) \\u4F86\\u53BB\\u628A\\u5B83\\u7DE8\\u78BC\\u6210\\u66F4\\u77ED\\u7684\\u5B57\\u4E32\\uFF0824 vs 20 hexadecimal digits\\uFF09(\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/rs/xid/blob/master/README.md\"\n  }, \"ref\"), \")\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/2aa89/xid.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"63.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB20lEQVQ4y1VS2XLjMAzzl2yyje34lnxIsuMrTZO20+n//w52QB+bPGBE0jQFQPT8WCNIK7ydCxTNgEQ7vJ0VwrRGkFQ4RUq+PcOPy//fIvVyeufcQNsJxyBD3V2Ragc/KdFcbijqfh2gpXkbntcXlG6W/G+YS207vaiaEaoBUd7A9B/CMC071N27MGdux4dcULVXGcS+MK12pkFSSi9VeWlzRdH/Im8muPEhsoumlyEcnNdL7FaY4Y5u/pa+rLoIyDjRLRLl4PmZQ6BHBJlBVrbiRVZ10GYUGXFh0c1f608OqW7XQZ1cvJ20RSRn9obi8oO8HoSBMqPIctOnMGTe335gh4fYQIasRYVFrNwOMmS/F+sOYe4QZvXq4UKdntETMmR985Ax2Z64HfRuxeJnCS+vOkR5jcMpwTFIcfRTHPxU4sMeZ3tMGwjWNmw1wouVFSlcnaqdUbpJYm3HVf4kfiozCMNzVotfobzq8rIva8MGM3zADvcd9JInZdrxjnb6RDsTX3udsuVB6v5lHz16xx/YRL8WGFlwns8+bftGhpT/55TsNmwsPdLmrdvSUhplbjkVcOnPT2DOh4sK88JuldzsMk1/E7Z8Sda41GTJ/ROoBfRdFCgre/s88B926pbcAlOP2AAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"xid\",\n    \"title\": \"xid\",\n    \"src\": \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/410f3/xid.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/0d3e1/xid.png 140w\", \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/6b1e2/xid.png 281w\", \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/410f3/xid.png 561w\", \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/99072/xid.png 842w\", \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/62a6a/xid.png 1122w\", \"/software-engineering-book-club/static/3a0fc9e1fee59d1b5402c8ed2380415b/2aa89/xid.png 1698w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/21cdd/xid_note.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"17.857142857142858%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnklEQVQY061PSQ6CQBCcp2hi5KAM4LBIZmM3KGj8/2PKdI/yAg+V6q26ukUU59gdTtgf479AyNzgcm2g6gYy10gorzxzrDSyb5wWFmlpeUYqjbR0rCNQnBQG0VlB2H5BN7/R3F4w/YPhhgVuWJn9FOq6nbe+pZlxZY3u7kEzrvDTEyJst+xC15AjcVa5zVnVLcInfvuErqUe8U9b6B4f1tOCbQnvBn0AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"xid note\",\n    \"title\": \"xid note\",\n    \"src\": \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/410f3/xid_note.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/0d3e1/xid_note.png 140w\", \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/6b1e2/xid_note.png 281w\", \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/410f3/xid_note.png 561w\", \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/99072/xid_note.png 842w\", \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/62a6a/xid_note.png 1122w\", \"/software-engineering-book-club/static/b9d1c84e7c664e6b12f25d00694c32c6/21cdd/xid_note.png 1680w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/5e485/benchmark.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"41.42857142857143%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRUlEQVQoz51R2VKDQBDcX9HSmIvIGa4lEGCBJOTwSNT//5C2eqik1Ecfpnbn6p7pUW5UwIvX8JMSDxMHdyML90+Lf5uauzFolpdg4WuM3QKPToEnJ8PI1rdCEv0k+0t8zSsnzJGWO8R5B8tLMbUj8bOqx8yOxBgP0hpBWmHmxGLLzIDbTZ5DECPKW9hhDhVmDZr9BfXuHX5SCWB7+EB3+sLcTcTceI28OUJXOwHnJuvuRUBYT/Bq+4Zw1UCRudy8SiApNsLOv+nPAkaf+hLQTwdCAq7MAUttxGec+UDXUESv+zPM/oK03EpB0Z3QHj9vgGTmRASgv/AzFO1J4jKhNkM+M1DUgavoqgfXpyYsXJm9NLPBi0vR2AkLTO1QiKK8EylYT4xkvZFXDSJH0jx3hmvLZHKMRDSzqKVMpm//a+3YCn5d/Bs86AXepztCzAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"benchmark\",\n    \"title\": \"benchmark\",\n    \"src\": \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/410f3/benchmark.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/0d3e1/benchmark.png 140w\", \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/6b1e2/benchmark.png 281w\", \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/410f3/benchmark.png 561w\", \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/99072/benchmark.png 842w\", \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/62a6a/benchmark.png 1122w\", \"/software-engineering-book-club/static/c6b75c97243ca1020f4f677703e26ca3/5e485/benchmark.png 2168w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"));\n}\n;\nMDXContent.isMDXComponent = true;","rawBody":"# 第七章：設計可用於分散式系統的唯一 ID 生成器\n\n## 前言\n\n唯一 ID 在系統中很重要，在單資料庫伺服器中，可以利用 primary key + _auto_increment_ 屬性來實作唯一 ID，但在分散式系統中，有多資料庫伺服器間的同步問題，本篇會介紹四種方法，以及各自的優缺點及使用時機\n\n## 步驟一：需求範圍確認\n\nQ: 唯一 ID 須具備哪些性質\n\nA: 須為唯一且可依時間先後排序\n\nQ: 新生成的 ID，是否為上一個 ID + 1\n\nA: ID 需隨時間嚴格遞增，但不一定需要絕對差距 1\n\nQ: ID 是否全為數字，還是可以有文字\n\nA: 需全為數字\n\nQ: ID 的長度有限制嗎\n\nA: 需為 64 bits\n\nQ: 系統的規模有多大\n\nA: 每秒需要能產生 10,000 IDs\n\n## 步驟二：high-level 架構\n\n四種分散式系統中唯一 ID 的設計方法：\n\n1. Multi-master replication\n2. Universally unique identifier (UUID)\n3. Ticket server\n4. Twitter snowflake approach\n\n### Multi-master replication\n\n![](assets/multi_master.png)\n\n如圖，還是利用資料庫的 _auto_increment_ 功能，只是不是 + 1，而是比如有 k 個資料庫就 + k，圖中 k = 2\n\n缺點：\n\n1. 多個資料中心下很難擴充\n2. ID 的值不一定隨著時間嚴格遞增，比如有一台產生較多，一台產生較少，那後者產生出的 ID 數值即使生成時間較晚，但 ID 數值仍會小於前者生成較早的 ID\n3. 很難 auto-scale 伺服器\n4. 離線時無法使用\n\n### UUID（Universally Unique Identifier）\n\nUUID 是一個能產生 128 bits ID 的演算法，有著極小的碰撞概率，每秒產生 10 億個 UUID 的情況下持續 100 年，只有 50% 的機率會碰撞\n\n一個 UUID 的範例：_09c93e62-50b4-468d-bf8a-c07e1040bfb2_，32 個 16 進位的字元，所以為 128 bits (32 \\* 4)\n\n因為有著極低的碰撞概率，因此可以每個伺服器都跑自己的 UUID 生成器，如下圖：\n\n![](assets/uuid.png)\n\n註：uuid 演算法\n\n---\n\n分成 v1 ～ v5，根據 uuid.js 統計有 77% 使用者選擇 v4；21% 使用者選擇 v1，有特殊需求才會選 v5 & v3，v2 基本上不採用 ([ref1](https://yuanchieh.page/posts/2020/2020-12-01-uuid-%E5%8E%9F%E7%90%86%E8%88%87%E5%AF%A6%E4%BD%9C%E5%88%86%E6%9E%90-%E8%A9%B2%E5%A6%82%E4%BD%95%E6%8C%91%E9%81%B8%E9%81%A9%E5%90%88%E7%9A%84-uuid-%E7%89%88%E6%9C%AC/))，使用時機可大略分為 ([ref2](https://stackoverflow.com/questions/20342058/which-uuid-version-to-use)、[ref3](https://www.uuidtools.com/uuid-versions-explained))：\n\n_只是單純需要一個隨機不重複的 uuid_：v4，會從超過 5.3 x 10^36 種可能的 uuid 裡面隨機生成出一個，分為兩個變化版，variant-1 為 Minecraft 中使用的演算法；variant-2 即 Microsoft 系統內的 GUID [ref3]\n\n_需要在前者的基礎上知道時間資訊（精度到 100 nanoseconds）和是哪台機器產生的_：v1，格式見下圖，前三組為時間資訊，表示從 1582-10-15 00:00:00 到現在經過了多少個 100 ns ([ref4](https://stackoverflow.com/questions/3795554/extract-the-time-from-a-uuid-v1-in-python))，low time 代表算出的間隔的最後 32 bits；mid time 為中間 16 bits；第三項為版本資訊 + 開頭 16 bits；第四項為 variant 編號 + system clock 值；第五項為網卡的 mac address\n\n![](assets/uuid_v1.png)\n\n要 decode 出時間的話，可參考該 python code ([ref5](https://stackoverflow.com/questions/17571100/how-to-extract-timestamp-from-uuid-v1-timeuuid-using-javascript)):\n\n![](assets/uuid_v1_decode.png)\n\n_需要能根據 namespace + input 產生 reproducible 的 uuid_：用 v3 或 v5，v3 將 input 用 MD5 hash；v5 用 SHA-1 hash，所以 v5 較 v3 安全\n\nnamespace 可以視為你的 key 的概念，範例可見 [ref6](https://stackoverflow.com/questions/10867405/generating-v5-uuid-what-is-name-and-namespace)\n\nRecap ([ref6](https://stackoverflow.com/questions/10867405/generating-v5-uuid-what-is-name-and-namespace))\n\n![](assets/uuid_recap.png)\n\n---\n\n優點：\n\n1. 簡單，不用考慮伺服器間的同步問題，且離線時也能使用\n2. 承上，高擴展性\n\n缺點：\n\n1. 128 bits 太長，浪費空間且不符合一開始的需求（64 bits）\n2. ID 不隨著時間嚴格遞增\n3. ID 內有非數字的值，不符合一開始的需求（需全為數字）\n\n### Ticket Server\n\n![](assets/ticket_server.png)\n\n如圖，ID 的發放統一由ㄧ伺服器負責\n\n優點：\n\n1. 可達成 ID 需為全數字的需求\n2. 容易實作，適用於小至中型系統\n\n缺點：\n\n1. Single point of failure\n2. 離線時無法使用\n\n### Twitter snowflake approach\n\n![](assets/snowflake.png)\n\n將 64 bits 分成幾個區塊，有點像是網路封包 header 的做法\n\n- 符號 bit：1 bit，二進位中 0 代表正，1 代表負\n\n- 時間戳記：41 bits，將毫秒等級的 unix timestamp 轉為二進位，此方式可用到 2039 年 41 bits 才會不夠用\n\n- 資料中心 ID：5 bits，上限 2 ^ 5 = 32 個資料中心\n\n- 機器 ID：5 bits，一個資料中心上限 2 ^ 5 = 32 台機器\n\n- 流水號：12 bits，為了處理高併發狀況，一毫秒內（因上面時間戳記的精度是毫秒）可能會同時產生一堆 UUID，因此一毫秒內產生的不同 UUID，流水號會以 + 1 的方式區分，此欄位每毫秒會重置\n\n## 步驟三：深入探討\n\n由上可知，最符合需求的是 Twitter snowflake approach，因此我們來探討其相關細節\n\n- 符號 bit：正常情況 ID 為正數，因此基本上此 bit 都為 0\n\n- 時間戳記：上述有提到到 2039 年 41 bits 會不夠用，因此 twitter 實務上此欄位的時間是為距公司創立時經過的相對時間，如下圖：\n\n![](assets/twitter_time.png)\n\n- 資料中心 ID：基本上不會用到這麼多資料中心，因此可減少 bit 數給其他人用，或者只有單一個資料中心的情況下，可替換為 table 的編號\n\n- 機器 ID：同上，隨著自身業務情況調整 bit 數\n\n- 流水號：用了 12 bits，每毫秒可產生 2 ^ 12 = 4096 個 UUID，需求為每秒 10,000 個 UUID 而已，因此這部分的 bits 數也可以考慮挪點給別人用\n\n## 步驟四：總結\n\n延伸可討論的點：\n\n- Clock synchronization：不同的機器的 system clock 不一定會對齊，因此實務上的解法是都跟 NTP 伺服器對時\n\n- Section length tuning：如上討論過的，snowflake 方法每個欄位需要多少 bit 的取捨，減少流水號欄位的 bit 用量而多分配給 timestamp 欄位，雖會降低併發能力，但能延後時間 overflow\n\n- High availability：ID 生成器很重要，設計上需考慮好如何保證高 availability\n\n## 補充資料\n\n一個簡單生成可排序的分散式 global uuid 演算法 [xid](https://github.com/rs/xid)\n\n一個 xid 的範例：_9m4e2mr0ui3e8a215n4g_，可以看到比 UUID 簡潔多了（雖然時間精度只到秒）\n\n其是基於 Mongo Object ID algorithm 生成的字串，Mongo Object ID 基本上格式如下：\n\n```\n0|1|2|3     4|5|6    7|8|      9|10|11\n\nTimestamp  machine   PID   Increment counter\n```\n\n再經由 base32hex (base32 的 variant 版本) 來去把它編碼成更短的字串（24 vs 20 hexadecimal digits）([ref](https://github.com/rs/xid/blob/master/README.md))\n\n![](assets/xid.png)\n\n![](assets/xid_note.png)\n\n![](assets/benchmark.png)\n","excerpt":"第七章：設計可用於分散式系統的唯一 ID 生成器 前言 唯一 ID 在系統中很重要，在單資料庫伺服器中，可以利用 primary key +  auto_increment  屬性來實作唯一 ID，但在分散式系統中，有多資料庫伺服器間的同步問題，本篇會介紹四種方法，以及各自的優…","outboundReferences":[],"inboundReferences":[]},"tagsOutbound":{"nodes":[]}},"pageContext":{"tags":[],"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","sidebarItems":[{"title":"Categories","items":[{"title":"Content","url":"","items":[{"title":"Domain-Driven-Design","url":"","items":[{"title":"Domain-Modeling-Made-Functional","url":"/content/domain-driven-design/domain-modeling-made-functional/","items":[{"title":"Chapter-1","url":"","items":[{"title":"Domain Driven Design Made Functional","url":"/content/domain-driven-design/domain-modeling-made-functional/chapter-1/chpater_1/","items":[]}]}]}]},{"title":"Front-End","url":"","items":[{"title":"微前端","url":"/content/front-end/micro-frontend/","items":[]}]},{"title":"System-Design","url":"","items":[{"title":"System-Design-Interview-Alex-Xu-Volume1","url":"/content/system-design/system-design-interview-alex-xu-volume1/","items":[{"title":"Chapter-1","url":"","items":[{"title":"第一章：使用者人數 -- 從零到百萬規模","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-1/chapter_1/","items":[]}]},{"title":"Chapter-10","url":"","items":[{"title":"Demo","url":"","items":[{"title":"React + TypeScript + Vite","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/demo/client/","items":[]}]},{"title":"design pattern (notification)","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/chapter_10/","items":[]}]},{"title":"Chapter-4","url":"","items":[{"title":"第四章：設計網路限速器","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-4/chapter_4/","items":[]}]},{"title":"Chapter-7","url":"","items":[{"title":"第七章：設計可用於分散式系統的唯一 ID 生成器","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","items":[]}]},{"title":"Chapter-8","url":"","items":[{"title":"第八章：設計短網址生成器","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","items":[]}]}]}]}]},{"title":"software-engineering-book-club","url":"/","items":[]}]}],"tagsGroups":[],"latestPosts":[{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/","title":"System-Design-Interview-Alex-Xu-Volume1","lastUpdatedAt":"2023-10-22T13:09:03.000Z","lastUpdated":"10/22/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/chapter_10/","title":"design pattern (notification)","lastUpdatedAt":"2023-09-02T03:25:17.000Z","lastUpdated":"9/2/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/demo/client/","title":"React + TypeScript + Vite","lastUpdatedAt":"2023-09-02T03:25:17.000Z","lastUpdated":"9/2/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/domain-driven-design/domain-modeling-made-functional/chapter-1/chpater_1/","title":"Domain Driven Design Made Functional","lastUpdatedAt":"2023-07-30T09:05:36.000Z","lastUpdated":"7/30/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","title":"第八章：設計短網址生成器","lastUpdatedAt":"2023-07-28T02:25:02.000Z","lastUpdated":"7/28/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","title":"第七章：設計可用於分散式系統的唯一 ID 生成器","lastUpdatedAt":"2023-07-07T03:07:23.000Z","lastUpdated":"7/7/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/","title":"software-engineering-book-club","lastUpdatedAt":"2023-07-06T14:43:04.000Z","lastUpdated":"7/6/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/domain-driven-design/domain-modeling-made-functional/","title":"Domain-Modeling-Made-Functional","lastUpdatedAt":"2023-07-06T07:45:19.000Z","lastUpdated":"7/6/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/front-end/micro-frontend/","title":"微前端","lastUpdatedAt":"2023-07-05T02:50:46.000Z","lastUpdated":"7/5/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-1/chapter_1/","title":"第一章：使用者人數 -- 從零到百萬規模","lastUpdatedAt":"2023-06-22T13:53:44.000Z","lastUpdated":"6/22/2023"},"frontmatter":{"draft":false,"tags":[]}}]}},
    "staticQueryHashes": ["2230547434","2320115945","3495835395","451533639"]}