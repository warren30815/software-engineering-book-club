{
    "componentChunkName": "component---node-modules-gatsby-theme-primer-wiki-src-templates-post-query-js",
    "path": "/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/",
    "result": {"data":{"mdx":{"id":"6938c258-d380-5d34-b324-3ea2336e8cd1","tableOfContents":{"items":[{"url":"#第八章設計短網址生成器","title":"第八章：設計短網址生成器","items":[{"url":"#前言","title":"前言"},{"url":"#步驟一需求範圍確認","title":"步驟一：需求範圍確認"},{"url":"#步驟二high-level-架構","title":"步驟二：high-level 架構"},{"url":"#步驟三深入探討","title":"步驟三：深入探討"},{"url":"#步驟四總結","title":"步驟四：總結"}]}]},"fields":{"title":"第八章：設計短網址生成器","slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","url":"https://warren30815.github.io/software-engineering-book-club/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","editUrl":"https://github.com/warren30815/software-engineering-book-club/tree/main/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8.md","lastUpdatedAt":"2023-07-28T02:25:02.000Z","lastUpdated":"7/28/2023","gitCreatedAt":"2023-06-23T09:47:55.000Z","shouldShowTitle":false},"frontmatter":{"title":"","description":null,"imageAlt":null,"tags":[],"date":null,"dateModified":null,"language":null,"seoTitle":null,"image":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"第八章設計短網址生成器\"\n  }, \"\\u7B2C\\u516B\\u7AE0\\uFF1A\\u8A2D\\u8A08\\u77ED\\u7DB2\\u5740\\u751F\\u6210\\u5668\"), mdx(\"h2\", {\n    \"id\": \"前言\"\n  }, \"\\u524D\\u8A00\"), mdx(\"p\", null, \"\\u672C\\u7BC7\\u6703\\u4ECB\\u7D39\\u5982\\u4F55\\u8A2D\\u8A08\\u4E00\\u77ED\\u7DB2\\u5740\\u751F\\u6210\\u5668\\uFF0C\\u4E3B\\u8981\\u63A2\\u8A0E hash \\u6620\\u5C04\\u51FD\\u6578\\u7684\\u8A2D\\u8A08\\uFF08for URL shortening\\uFF09\\u4EE5\\u53CA\\u5F9E\\u77ED\\u7DB2\\u5740\\u62FF\\u5230\\u5B8C\\u6574\\u7DB2\\u5740\\u5F8C\\u7684 URL \\u91CD\\u5C0E\\u5411\\uFF08redirecting\\uFF09\"), mdx(\"h2\", {\n    \"id\": \"步驟一需求範圍確認\"\n  }, \"\\u6B65\\u9A5F\\u4E00\\uFF1A\\u9700\\u6C42\\u7BC4\\u570D\\u78BA\\u8A8D\"), mdx(\"p\", null, \"Q: \\u53EF\\u4EE5\\u8209\\u500B\\u4F8B\\u5B50\\u8AAA\\u660E\\u6B64\\u77ED\\u7DB2\\u5740\\u670D\\u52D9\\u7684\\u904B\\u4F5C\\u55CE\"), mdx(\"p\", null, \"A: \\u5047\\u8A2D \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.systeminterview.com/q=chatsystem&c=loggedin&v=v3&l=long\"\n  }, \"https://www.systeminterview.com/q=chatsystem&c=loggedin&v=v3&l=long\"), \" \\u70BA\\u539F\\u59CB\\u7DB2\\u5740\\uFF0C\\u6B64\\u670D\\u52D9\\u6703\\u5275\\u5EFA\\u4E00\\u7E2E\\u77ED\\u7248\\u672C\\uFF08alias\\uFF09\\uFF0C\\u5982 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://tinyurl.com/y7keocwj\"\n  }, \"https://tinyurl.com/y7keocwj\"), \" \\uFF0C\\u5982\\u9EDE\\u64CA\\u6B64 alias\\uFF0C\\u6703\\u5C07\\u4F60\\u91CD\\u5C0E\\u5411\\u81F3\\u539F\\u59CB\\u7DB2\\u5740\"), mdx(\"p\", null, \"Q: \\u670D\\u52D9\\u8981\\u652F\\u63F4\\u591A\\u5927\\u6D41\\u91CF\\u898F\\u6A21\"), mdx(\"p\", null, \"A: \\u6BCF\\u5929 100 million \\u500B\\u7DB2\\u5740\"), mdx(\"p\", null, \"Q: \\u77ED\\u7DB2\\u5740\\u9577\\u5EA6\\u662F\\u5426\\u6709\\u9650\\u5236\"), mdx(\"p\", null, \"A: \\u8D8A\\u77ED\\u8D8A\\u597D\"), mdx(\"p\", null, \"Q: \\u751F\\u6210\\u7684\\u77ED\\u7DB2\\u5740\\u662F\\u5426\\u6709\\u7B26\\u865F\\u9650\\u5236\"), mdx(\"p\", null, \"A: \\u9700\\u5168\\u70BA\\u6578\\u5B57\\u6216\\u82F1\\u6587\\uFF080-9 & a-z & A-Z\\uFF09\"), mdx(\"p\", null, \"Q: \\u77ED\\u7DB2\\u5740\\u662F\\u5426\\u53EF\\u88AB\\u522A\\u9664\\u6216\\u66F4\\u65B0\"), mdx(\"p\", null, \"A: \\u53EF\\u5047\\u8A2D\\u4E0D\\u6703\\u88AB\\u522A\\u9664\\u6216\\u66F4\\u65B0\"), mdx(\"h3\", {\n    \"id\": \"需求總結\"\n  }, \"\\u9700\\u6C42\\u7E3D\\u7D50\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"URL shortening\\uFF1A\\u7D66\\u4E00\\u9577\\u7DB2\\u5740 -> \\u56DE\\u50B3\\u77ED\\u7DB2\\u5740\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"URL redirecting\\uFF1A\\u7D66\\u4E00\\u77ED\\u7DB2\\u5740 -> \\u56DE\\u50B3\\u9577\\u7DB2\\u5740\\u4E26\\u91CD\\u5C0E\\u5411\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u9AD8\\u53EF\\u7528\\u6027\\u3001\\u64F4\\u5C55\\u6027\\u3001\\u932F\\u8AA4\\u5BB9\\u8A31\")), mdx(\"h3\", {\n    \"id\": \"系統規格估算\"\n  }, \"\\u7CFB\\u7D71\\u898F\\u683C\\u4F30\\u7B97\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5BEB\\u5165\\u91CF\\uFF1A100 million \\u500B\\u7DB2\\u5740 / \\u65E5\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6BCF\\u79D2\\u5BEB\\u5165\\u91CF\\uFF1A100 million / 24 / 3600 = 1160\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8B80\\u53D6\\u91CF\\uFF1A\\u5047\\u8A2D\\u8B80\\u5BEB\\u6BD4\\u70BA 10 : 1\\uFF0C\\u6BCF\\u79D2\\u8B80\\u53D6\\u91CF\\u70BA 1160 x 10 = 11,600\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5047\\u8A2D\\u6B64\\u670D\\u52D9\\u6703\\u904B\\u4F5C 10 \\u5E74\\uFF0C\\u7E3D\\u7DB2\\u5740\\u91CF\\u70BA 100 million x 365 x 10 = 365 billion\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5047\\u8A2D\\u5E73\\u5747\\u4E00\\u500B\\u7DB2\\u5740\\u9577\\u5EA6\\u70BA 100 bytes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"10 \\u5E74\\u7684\\u898F\\u683C\\u4E0A\\u9650\\u70BA 365 billion x 100 bytes x 10 years = 365 TB\"))), mdx(\"h2\", {\n    \"id\": \"步驟二high-level-架構\"\n  }, \"\\u6B65\\u9A5F\\u4E8C\\uFF1Ahigh-level \\u67B6\\u69CB\"), mdx(\"h3\", {\n    \"id\": \"api-endpoints\"\n  }, \"API Endpoints\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"URL shortening\")), mdx(\"p\", null, \"REST API \\u7BC4\\u4F8B\\u5982\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"POST api/v1/data/shorten\\n\\n- request parameter: {longUrl: longURLString}\\n- return shortURL\\n\")), mdx(\"p\", null, \"\\u5047\\u8A2D\\u7E2E\\u77ED\\u5F8C\\u7684\\u7DB2\\u5740\\u683C\\u5F0F\\u5982\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"www.tinyurl.com/{hashValue}\\n\")), mdx(\"p\", null, \"\\u6211\\u5011\\u9700\\u8A2D\\u8A08\\u4E00 hash \\u51FD\\u6578\\u4F86\\u5C07\\u9577\\u7DB2\\u5740\\u5C0D\\u61C9\\u6210\\u77ED\\u7DB2\\u5740\\uFF0C\\u9700\\u7B26\\u5408\\u5169\\u689D\\u4EF6\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6BCF\\u4E00\\u9577\\u7DB2\\u5740\\u5C0D\\u61C9\\u552F\\u4E00\\u7684\\u77ED\\u7DB2\\u5740\\u5B57\\u4E32\\uFF08\\u5373\\u4E0A\\u9762\\u7684 hashValue\\uFF09\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6BCF\\u4E00 hashValue \\u53EF\\u5C0D\\u61C9\\u56DE\\u53BB\\u9577\\u7DB2\\u5740\")), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"URL redirecting\")), mdx(\"p\", null, \"REST API \\u7BC4\\u4F8B\\u5982\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"GET api/v1/shortUrl\\n\\n- Return longURL for HTTP redirection\\n\")), mdx(\"p\", null, \"\\u91CD\\u5C0E\\u5411\\u6D41\\u7A0B\\u53EF\\u898B\\u4E0B\\u5716\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/0940f/redirect.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100.71428571428571%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACYElEQVQ4y41U226bQBD1//ap31Op/ZBK7WulVlWruG6IEhvbQMCAIYa9L3uqWXt9SXDSkUaLV+bsuQw7YZwjz3NkWYayLI9d17XfozbGwDn3Xz3pug7z+RxpmuIuivD79y9Mp1Pc3NwgiiLMZjO/JkmC1WqF9Xrtn6kXi4X/HfY555gMDig6hnXd4LFpPVtiuN1u0batX+mPdPowDK+2ZygGh6TY4P4uQi0kHMYrvPCmZAJMqxoP9/eomIC2Fu4NJgH8+bMHJEabXY95loPbSxahxuRe25vQC1oplFUFbSyE0rDWwg4DlFK+B2sJ9XjQJQit9iSZAKWUHtAODlJrMCE9cL4p8bCIMY+X2JQlBudgrD2wd/4QM+yVmHOGBEhp7uVdyiYQpTV6zsGkPLZQCvmOI+0afFt/QcEYem1OgDTIIc3gx7UiS+iQmlMX+Pj9HaQV2KkzwKY5MDwAGmOxbRrkRYHlauVlt10PrrRnSIAlE1ikS/y8+4qkeEQr9SmUOMnApPJSOLVU+PP3FrPbyPsYxzG6vj/6SMW1weNTh4YZFF0PaewekJLM8gI9+SMktDE4m5kLuedJh+RtsGgsFJJC7HoukKQZttsGWuvDeFybQ7tfzwFDKIEBGd8xhlWSYh7H4EK+YBhYBSVuDHAsZfKMgugP8xk8FMai5BxZV6Li8uThGOBzeTiwosEnYC4FKqaxYQU+/XiPXgs8qWtz6K5fAkEafY5Z0yOt1vg8/YC6rU9jQ4BVVY1eU9duG6qWC8yzApu6w7IosZMKkxDAPkn36r33grVzkIMDt9avFMo/SW4SvXet9xUAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"redirect\",\n    \"title\": \"redirect\",\n    \"src\": \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/410f3/redirect.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/0d3e1/redirect.png 140w\", \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/6b1e2/redirect.png 281w\", \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/410f3/redirect.png 561w\", \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/99072/redirect.png 842w\", \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/62a6a/redirect.png 1122w\", \"/software-engineering-book-club/static/c227b69e9ae32f20d015ba328077153e/0940f/redirect.png 1154w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"301 vs 302 \\u91CD\\u5C0E\\u5411\"), mdx(\"p\", null, \"301 \\u70BA\\u6C38\\u4E45\\u8F49\\u5740\\uFF0C302 \\u70BA\\u66AB\\u6642\\u8F49\\u5740\\uFF0C\\u5982\\u679C\\u60F3\\u6E1B\\u5C11\\u4F3A\\u670D\\u5668\\u8CA0\\u64D4\\uFF0C\\u7528 301\\uFF0C\\u56E0\\u70BA\\u80FD cache \\u5728\\u700F\\u89BD\\u5668\\u7AEF\\uFF0C\\u4E0D\\u6703\\u518D\\u5411\\u77ED\\u7DB2\\u5740\\u4F3A\\u670D\\u5668\\u767C\\u9001\\u8ACB\\u6C42\\uFF1B\\u4F46\\u5982\\u679C analytics \\u5F88\\u91CD\\u8981\\uFF0C\\u7528 302\\uFF0C\\u56E0\\u70BA\\u6709\\u7D93\\u904E\\u77ED\\u7DB2\\u5740\\u4F3A\\u670D\\u5668\\u624D\\u80FD\\u8FFD\\u8E64\\u6D41\\u91CF\\u3001\\u5206\\u6790\\u884C\\u92B7\\u6210\\u6548\\u7B49\\u7B49\"), mdx(\"h2\", {\n    \"id\": \"步驟三深入探討\"\n  }, \"\\u6B65\\u9A5F\\u4E09\\uFF1A\\u6DF1\\u5165\\u63A2\\u8A0E\"), mdx(\"h3\", {\n    \"id\": \"資料結構\"\n  }, \"\\u8CC7\\u6599\\u7D50\\u69CB\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/5eb90/ds.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"18.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAmklEQVQY04VPwQqFIBD0/78wUqQOhVmZFdlBax6z4C14C8O46zjOqvM8kVLCdV2CEAKmaRIcx4F5njGOI6irmi/QgxqVcwbrfV88z4NlWcSMTIFzTgxLKfhX931Daa1hjEHbthiGQRJZa+G9R4xRzpx3XYemaYSpr+/6vhfmp0yquOK2bQIasF/XFfu+C5i03nNOpqai9tRy5R8K5S9wKt1x6gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ds\",\n    \"title\": \"ds\",\n    \"src\": \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/410f3/ds.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/0d3e1/ds.png 140w\", \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/6b1e2/ds.png 281w\", \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/410f3/ds.png 561w\", \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/99072/ds.png 842w\", \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/62a6a/ds.png 1122w\", \"/software-engineering-book-club/static/c0c2c0311114058ad63d71868c6fc1bc/5eb90/ds.png 1612w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"h3\", {\n    \"id\": \"hash-函數for-url-shortening\"\n  }, \"hash \\u51FD\\u6578\\uFF08for URL shortening\\uFF09\"), mdx(\"p\", null, \"\\u9078\\u64C7\\u5408\\u9069\\u7684 hash \\u51FD\\u6578\\u524D\\uFF0C\\u6211\\u5011\\u9700\\u8981\\u5148\\u4F30\\u7B97 hashValue \\u7684\\u6700\\u5C0F\\u9577\\u5EA6\\uFF0C\\u6BCF\\u4E00 hashValue \\u88E1\\u7684\\u5B57\\u5143\\u53EF\\u70BA \", \"[0-9, a-z, A-Z]\", \"\\uFF0C\\u6709 10 + 26 + 26 = 62 \\u500B\\u9078\\u9805\\uFF0C\\u56E0\\u4E0A\\u9650\\u7684\\u7E3D\\u7DB2\\u5740\\u91CF\\u70BA 365 billion \\u7B46\\uFF0ChashValue \\u7684\\u6700\\u5C0F\\u9577\\u5EA6\\u70BA minimum n that can make 62^n \\u2265 365 billion\\uFF0C\\u53EF\\u7B97\\u51FA n = 7 \\u6642\\u53EF\\u7B26\\u5408\\u689D\\u4EF6\\uFF0C\\u56E0\\u6B64 hashValue \\u7684\\u6700\\u5C0F\\u9577\\u5EA6\\u70BA 7\"), mdx(\"p\", null, \"\\u5169\\u7A2E\\u8A2D\\u8A08 hash \\u51FD\\u6578\\u7684\\u65B9\\u6CD5\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u4F7F\\u7528\\u77E5\\u540D\\u7684 hash functions + \\u78B0\\u649E\\u8655\\u7406\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Base 62 conversion\")), mdx(\"h4\", {\n    \"id\": \"知名-hash-functions--碰撞處理\"\n  }, \"\\u77E5\\u540D hash functions + \\u78B0\\u649E\\u8655\\u7406\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/6a5c3/hash_with_collision.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"60%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABZUlEQVQoz6WSzXLbMAyE/f7v1lty6SHxTxxTkmNbEkWQIKkvQ9pO3CZtp4lmwAExi8WuwMXe7+lciyQh5ZnBB3on9M7VPOVMTJlefK2dnMOqkms9MQZlqHjBxcTC2B3mZOjDgA+RXT+yNC0/N1vMMOI1IkHZHgdWpmHZtLw4IWhk8ko7CaumZd12DBpZaFZcdjADczkg5ozEeCnN78EZVtTd1jUlQkw1X5SjoAroCkwFoFrbr025NEZF03lQbboIGLzSS6j3SngleiPMGedDteVV8TGy2h/4cXfP3cMjT8eeZ2NYbza0dmLb7XnqOo4SPhLekhalKeWaj3VZvi7HlmEh4L1HY+JltBzsVF38Qvhm77f7fLH2p6+4kPqL+NzyVenfYs5n5QcJLJuOh13DyevnCv8Vt4MnjfSTcLSClHf4FcJbF3XLahnVfrT8v2QlDzlgBoMZDXGO31N4fg2JTroaec68ApttrZB7vu3GAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"hash with collision\",\n    \"title\": \"hash with collision\",\n    \"src\": \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/410f3/hash_with_collision.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/0d3e1/hash_with_collision.png 140w\", \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/6b1e2/hash_with_collision.png 281w\", \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/410f3/hash_with_collision.png 561w\", \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/99072/hash_with_collision.png 842w\", \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/62a6a/hash_with_collision.png 1122w\", \"/software-engineering-book-club/static/189d8177ff0e7908c561eb0ddc63d2ff/6a5c3/hash_with_collision.png 1646w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u7528\\u77E5\\u540D\\u7684 hash \\u6F14\\u7B97\\u6CD5\\uFF0C\\u5982 CRC32\\u3001MD5\\u3001SHA-1...\\uFF0C\\u7F3A\\u9EDE\\u70BA hash \\u51FA\\u4F86\\u7684\\u5B57\\u4E32\\u592A\\u9577\\uFF0C\\u4EE5\\u53CA\\u9084\\u9700\\u8981\\u5411\\u8CC7\\u6599\\u5EAB\\u78BA\\u8A8D\\u662F\\u5426\\u6709\\u78B0\\u649E\\uFF0C\\u6703\\u964D\\u4F4E\\u6548\\u80FD\\uFF0C\\u4E00\\u500B\\u63D0\\u9AD8\\u6AA2\\u67E5\\u6548\\u7387\\u7684\\u6539\\u9032\\u65B9\\u5F0F\\u70BA\\u61C9\\u7528 Bloom filter\\uFF08\\u898B\\u4E0B\\u65B9\\u5099\\u8A3B\\uFF09\\uFF0C\\u96D6\\u6709\\u53EF\\u80FD\\u7522\\u751F false positive\\uFF0C\\u4F46\\u5728\\u6B64\\u61C9\\u7528\\u60C5\\u5883\\u4E0B\\u53EF\\u5BB9\\u5FCD\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u8A3B\\uFF1ABloom filter \\u4ECB\\u7D39\")), mdx(\"p\", null, \"\\u70BA\\u4E86\\u78BA\\u8A8D\\u8CC7\\u6599\\u662F\\u5426\\u91CD\\u8907\\uFF0C\\u53EF\\u4EE5\\u7528\\u4EE5\\u4E0B\\u5E7E\\u7A2E\\u65B9\\u5F0F\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u76F4\\u63A5\\u628A\\u8CC7\\u6599\\u4E1F\\u5230\\u8CC7\\u6599\\u5EAB\\uFF0C\\u7531\\u8CC7\\u6599\\u5EAB\\u57F7\\u884C\\u53BB\\u91CD (Deduplication)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u958B\\u4E00\\u500B\\u5920\\u5927\\u7684 hash table\\uFF0C\\u628A\\u8CC7\\u6599\\u4E1F\\u9032\\u53BB\\u770B\\u662F\\u5426\\u5DF2\\u5B58\\u5728\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5EFA\\u4E00\\u500B bit array\\uFF0C\\u5C07\\u8CC7\\u6599\\u7531\\u4E00\\u500B hash function \\u6620\\u5C04\\u51FA\\u4E00 unsigned int\\uFF0C\\u5C07\\u8A72\\u6578\\u5B57\\u4F5C\\u70BA bit array \\u7684 index \\u4E26\\u586B\\u5165 1\")), mdx(\"p\", null, \"\\u65B9\\u6CD5 1 \\u5728\\u8CC7\\u6599\\u91CF\\u5F88\\u5927\\u6642\\u6703\\u56B4\\u91CD\\u62D6\\u57AE\\u8CC7\\u6599\\u5EAB\\u6548\\u80FD\\uFF0C\\u4E14\\u6BCF\\u591A\\u4E00\\u7B46\\u8CC7\\u6599\\u5C31\\u8981\\u67E5\\u8A62\\u4E00\\u6B21\\u8CC7\\u6599\\u5EAB\\u592A\\u6D6A\\u8CBB\"), mdx(\"p\", null, \"\\u65B9\\u6CD5 2 \\u5728\\u8CC7\\u6599\\u91CF\\u5F88\\u5927\\u6642\\u6703\\u5F88\\u8017\\u8CBB\\u8A18\\u61B6\\u9AD4\\u7A7A\\u9593\"), mdx(\"p\", null, \"\\u65B9\\u6CD5 3 \\u53EF\\u80FD\\u6703\\u6709 hash collision \\u554F\\u984C\"), mdx(\"p\", null, \"\\u7531\\u4E0A\\u53EF\\u77E5\\u65B9\\u6CD5 1, 2 \\u4E0D\\u9069\\u7528\\u8CC7\\u6599\\u91CF\\u5927\\u6642\\u7684\\u60C5\\u5883\\uFF0C\\u6211\\u5011\\u53EF\\u4EE5\\u6539\\u826F\\u65B9\\u6CD5 3\\uFF0C\\u65E2\\u7136\\u4E00\\u500B hash function \\u53EF\\u80FD\\u6703\\u6709 collision\\uFF0C\\u90A3\\u6211\\u5011\\u5C31\\u591A\\u52A0\\u5E7E\\u500B hash function \\u7522\\u751F\\u591A\\u500B unsigned int index\\uFF0C\\u82E5\\u4E00\\u8CC7\\u6599\\u5168\\u90E8\\u5C0D\\u61C9\\u7684 bit array index \\u7684\\u503C\\u4E0D\\u90FD\\u70BA 1\\uFF0C\\u5247\\u4ED6\\u4E00\\u5B9A\\u4E0D\\u5B58\\u5728\\uFF08definitely no\\uFF09\\uFF1B\\u82E5\\u90FD\\u70BA 1\\uFF0C\\u56E0\\u70BA\\u6709\\u53EF\\u80FD\\u662F\\u5176\\u4ED6\\u8CC7\\u6599\\u8CA2\\u737B\\u7684\\uFF0C\\u6240\\u4EE5\\u53EF\\u80FD\\u5B58\\u5728\\uFF08probably yes\\uFF09\\uFF0C\\u6B64\\u5373\\u70BA bloom filter \\u7684\\u6838\\u5FC3\\u6982\\u5FF5\"), mdx(\"p\", null, \"\\u7C21\\u6613\\u7BC4\\u4F8B\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/ea66f/bf_example.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxUlEQVQoz3WSa2sTQRSG95ckkHQvs7NzTTbNZpNNmogkUFKqiJWgSBUURBDBX+BXwZ/8yGzZNK3th5czlz3Pec/ZiVarFcvlksViQZqmJEnyQGfDYRvjJGE4TIjj+7s4jvHet/l1XVOWJZEQgizLCDHP86PCXilFNaspigJVCJpZjtbh7v67kNsVCIaix5AOHKK0jrKpsV5TjgTTSY45AsV/JoKixwctLMuQqsCNNYV3FEajVUaaCZzpQOLJrqJTV8F+mmbIQuArj7SWzI0Y1xO0VmQix/oCZeQD2CkjOoU1TcOL5Qp5vSN7u2e8XiGbivXlntvPPzHzKeLTDfb1JVLKIyjMuGNEp1W01hhjUNbiJiXaGAqlGPkxk3KKNppxNcV4f8w5r6ZcbNY0qyXWOaJA7dQ9mzRJkHl+/HMiE3drITiL41ZhX05Klk3DrJoxn89pFgui8JaeUpImbVuqUHfzEQKf55R5jg3dWEtVVTRvrth9ec/F4RXuakc0GAx4TmEE1trWZSjyo6r4u9nwta4ZTc/bFvffPvLn93d+HbYMFiOifr/Pc+r1eq26tSwkzjusdzjvMdbw8sOB25t3bEcl9nrLP/TfVEN7r71sAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"bf example\",\n    \"title\": \"bf example\",\n    \"src\": \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/410f3/bf_example.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/0d3e1/bf_example.png 140w\", \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/6b1e2/bf_example.png 281w\", \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/410f3/bf_example.png 561w\", \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/99072/bf_example.png 842w\", \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/62a6a/bf_example.png 1122w\", \"/software-engineering-book-club/static/6b28acc48a162dbd243f5929f8151413/ea66f/bf_example.png 2828w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"Bloom filter \\u8AAA\\u6C92\\u6709\\u8A72\\u8CC7\\u6599\\u7684\\u8A71\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4E00\\u5B9A\"), \"\\u6C92\\u6709\\uFF0C\\u8AAA\\u6709\\u8A72\\u8CC7\\u6599\\u7684\\u8A71\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4E0D\\u4E00\\u5B9A\"), \"\\u6709\\uFF08definitely no and probably yes\\uFF09\"), mdx(\"p\", null, \"\\u9069\\u7528\\u60C5\\u5883\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/0c307/bf.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"18.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7klEQVQY0y2PO07DQABEfQ8kFAr2k9jr3ezPdmxsSOIg0RGJ1BwhV6DgUFzuIQeKp9FMMdIr1lvLZutYckFbg+oyOgeUNei6QgmBEAKlFGulkFIhlaI0hqquqSqD/t+KJiWGvqff7ZjGEW8td19X7j8/kKsHhK3JTcv+OLP1AekcKQZi8LwdDrzPM6fXEyZHOmsphtvRxHw80uSMeBR87/f8nM9cvGdla2xIuNxS+oje9XRNps2J1jm6siQET5wGXnKmqILHpIBtEhvveDQVl5y4Dj1P0d+6lhIlJXpRlhK5oP4UpdbEFBmnkeF54hfgsYEXEwlL2gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"bf\",\n    \"title\": \"bf\",\n    \"src\": \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/410f3/bf.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/0d3e1/bf.png 140w\", \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/6b1e2/bf.png 281w\", \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/410f3/bf.png 561w\", \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/99072/bf.png 842w\", \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/62a6a/bf.png 1122w\", \"/software-engineering-book-club/static/f790c95e5c259a6aaf77672aff7919fe/0c307/bf.png 2526w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u4F7F\\u7528\\u6848\\u4F8B\\uFF08\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u5141\\u8A31\\u4E9B\\u5FAE\\u51FA\\u932F\\u7684\\u53EF\\u80FD\\u6027\\uFF0C\\u4E0D\\u4E00\\u5B9A\\u8981 100% \\u6E96\\u78BA\"), \"\\uFF09\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Database\")), mdx(\"p\", null, \"\\u5229\\u7528 Bloom Filter \\u4F86\\u521D\\u7BE9\\u8A72\\u8CC7\\u6599\\u662F\\u5426\\u5B58\\u5728\\u65BC\\u67D0\\u500B Partition\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/01744/bf_case1.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/UlEQVQoz22SyW7bMBgG/SjxIonUQsraZYmSLCd2nMRB0wA5FQ166KWHogXyDL30oaeQnDhG28PwJ0Fy+JHgpG1buq4jCAIW1gLbtlksLOZzC2thYVn2yHxhM5sf+8May7KQUtI0DXVdU1XV6Ji4rsuIdJHy2I+SkCSLCJeKUEm0cikyD7PyUMH7ukHoOM54gO0443gyNOOECnA9OW7I64LdviSIUjxP4CkfHUiSSBJqFyEkris5hTljFLq+j19m6GVAshQk289kDz8Q5Rbfc4jSIXFBWa7QSiKkPCU8l50Saq0pyhKtQ6QUmE1Pf3dLagxRFZM3KUmdUWQhcaRer/wuPRdPzt/iNCFsnMUUlSekmw1x1xF1LVEakSYJjhD/yIQQx4T/ewcpJH5eoA8P6P2BcHeDPnwk6K8IlCJJknGzUoq6MbR9R5plyCHhYP4bRwqUaYhuP7C8vjuyvx9rkER4njcKa2No6hpT1XRNQ5nnTIb/9IZt2eNflHmJf7nH67d4/e7I5rX2W9wwZL1eU2/WNM9PdJ8eiR9vSQ/XTObzOW/MplOE7+GbDjXImh49CMwav92gukuym3vSvieJI4q+4/uvF36/PNM1MbOrlsnFxQUnplOMMZRFzqrIqcqC1tRjHegag6lW1HWFVorYVHz5+Y2v/YrL3Qr5dM0f7QZc7/86eD0AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"bf case1\",\n    \"title\": \"bf case1\",\n    \"src\": \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/410f3/bf_case1.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/0d3e1/bf_case1.png 140w\", \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/6b1e2/bf_case1.png 281w\", \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/410f3/bf_case1.png 561w\", \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/99072/bf_case1.png 842w\", \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/62a6a/bf_case1.png 1122w\", \"/software-engineering-book-club/static/c2e34d17def1a5ba4e4d7ef41e38a0c9/01744/bf_case1.png 2830w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"CDN\")), mdx(\"p\", null, \"Akamai cdn \\u4E0A\\u6709 75% \\u7684\\u7DB2\\u5740\\u53EA\\u88AB\\u8A2A\\u554F\\u904E\\u4E00\\u6B21\\uFF0C\\u9019\\u7A2E\\u51B7\\u9580\\u7684\\u7DB2\\u5740\\u4E0D\\u9700\\u6536\\u9304\\u9032\\u53BB cdn \\u7BC0\\u7701\\u7A7A\\u9593\\uFF0C\\u4E5F\\u56E0\\u6B64\\u964D\\u4F4E\\u5FEB\\u53D6\\u7684\\u8CA0\\u64D4\\u3001\\u63D0\\u9AD8 cache hit \\u6A5F\\u7387\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/df009/bf_case2.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABwElEQVQoz5WTXYvTQBSG55+0NmnmK/OVpI1p0yRlt7ZlFxcrCLsICl4IXul/8Nbf/MoZGzeCCF48nDkvk5kz57xhXdeBaNsWnHMsl0tkWRbjv6A9aZoihIC+77HdblFVFZjWGkopjPF/kVLGQugCioyEESFERNLGyQdCihjVVZdXfdSmsOlNzrn4BEkHcA7BOTTpxsRIuRICSkoYY/5aLVNKxhuzjGMYBhzPZyjroZsGblOj6lq0p1dobvawL9eQRUBYrXFzOKAoCkhBlarf1TJK8lwieAXtA3IfIJWGDB66KiALj8zbeJCi3FnoPIdyHsoXUErAml+HUbuYEAqrUuF20DBGQ3CBWDX1kp4XmeYyPpnWtrC4e33C5e0d+qGF9R6McwGTCxRexN6NgxHXYfzJ8+CoRfW6xPGwx+1+h27XomtbMPJUmi6RpM8eS5IkQj6bMmpkEessmmaD7eUeh09P6J/eIDycwRaLBYgkGWMSJ2itjd7MqV9Xn9Lae49m06DZbmCdw/2XD/jx/Su+PR7xYleCzWYzEPP5HOOaPibX0xTruo5WKssy/g0EaT4EGGdx+vgenx/f4WFVwF2O+An1glJ+h8veNgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"bf case2\",\n    \"title\": \"bf case2\",\n    \"src\": \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/410f3/bf_case2.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/0d3e1/bf_case2.png 140w\", \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/6b1e2/bf_case2.png 281w\", \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/410f3/bf_case2.png 561w\", \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/99072/bf_case2.png 842w\", \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/62a6a/bf_case2.png 1122w\", \"/software-engineering-book-club/static/9a7b7fbbc4d586e8fec45228a6ab332d/df009/bf_case2.png 2832w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u60E1\\u610F\\u7DB2\\u5740\\u6AA2\\u6E2C\")), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/b43c0/bf_case3.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACIElEQVQoz2WS3W4TMRCF9yWQUNUmzW7stb272fX+pEk2PzQqtAVEKxBIpSCVlp9egBC94IoLbngG3gSJp/uQ3SatxMXReEYzx+eMHSwWC+bzObPZDBnHxFLSk5KNqI8QEimljx7yJr+p9fuCqqr8fNu2NE1DoLVGKYWLiTEIo3mUpHxrSopUo7Uhz1IGmSZzubqOpU1IU0McK3+JQxzHBMYYVkiSBNEPeXJxwt8/v/n0skeYjGgXLZNZwXBUoMshO+Oc5VRSWoNSbu6WY03oVCqt0SKmt2w4vtpjbAWh0ChjiHWKMolHXRc83p+QZYl3tuJw52BVKApLaTOsNeR5jrRO1YLJtL0e8H3OsiLLMobDEfoO0YonWBXquqFpcsZZRJUkWFuzrBrassYk5j8lKo7XRGmarl3eWtbK2+08fcj9yzdsfDjl3tkLNp8fYtzwHbL13rVhZzxid2/J/MGC3BYEfnd+fwoVRWwf7yOu3qO+niO/X7J9coQWwu931ete071qMxyycF9mMmE6nTKfzQiEEDi4pjhJMUKRS80gEpjNDnKzQ9SPiKJrrHqdmvF4zPzVEQcf37J7+pzy6JAgDEPCsEdfxsi8RNiKvq0QSUqSZR6DwQBrLYMsIy9y6qbxVvPCcvzlnF8/P/Pj3TPkoibodrus0dliu9Ohu7XlP3ld1xRFQVmWnrCsStppiy2th1N5cHbKxesTDvMB+fE+/wAasFjE0/AEtwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"bf case3\",\n    \"title\": \"bf case3\",\n    \"src\": \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/410f3/bf_case3.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/0d3e1/bf_case3.png 140w\", \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/6b1e2/bf_case3.png 281w\", \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/410f3/bf_case3.png 561w\", \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/99072/bf_case3.png 842w\", \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/62a6a/bf_case3.png 1122w\", \"/software-engineering-book-club/static/196efe6f658fd1d0239f114a3f971942/b43c0/bf_case3.png 2826w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5F31\\u5BC6\\u78BC\\u6AA2\\u6E2C\")), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/b43c0/bf_case4.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.57142857142857%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvElEQVQoz5WSTW/TQBCG/UsS24n3e73rpHbjBNtJKVWhShSHA4dQATckQNw5QKUKxNd/ftFu4pAqFzg8ejW7M+/s2BM0TQNHVVWglIIQ8k+43CRJMB6Pff1sNkOe5wgYY+gQQvw3ru64SfAggXMoITxSciiHYLtYSH/PHWKvnJ808IZ8HzgNKUFIKKJYoJdo9KhBjwiEJAFREkLKvak4MXRx0B0yIWA4x31zgfsnFT59JPj5OcWPLxrfv77E3bdfWCyXGHIOefSIzqjzORi6BMU5VtkIyzOLmyuKzdpg02ZoN4+x3r7G2eUVqNyNfmyktDp8z+Dgvh8jZgwxZYgTib7OEHKDUGpExoAUOXhmD2ZOJ2WJxeUF6nkDm9mHf9nhGziVAsxosFTt0ApUS1AlQRkDJQR5UaCua5TTKR5VFeq6QuB26ZjBYPCXOD5hOBj69TDWoCxL1C/WuHl7i8W2hV1dI4jjGB3OJMsyWGuRpimMMT5OTep1NBr5RXZjNvMGOk2xevcGv+/e48PzOfqzDEG/30dHFEXeTGvti52hUymlP3cvKqcliqLA+eQcSmtcv9ritl3jWTGBbZ/iD21nVt68p4fDAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"bf case4\",\n    \"title\": \"bf case4\",\n    \"src\": \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/410f3/bf_case4.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/0d3e1/bf_case4.png 140w\", \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/6b1e2/bf_case4.png 281w\", \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/410f3/bf_case4.png 561w\", \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/99072/bf_case4.png 842w\", \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/62a6a/bf_case4.png 1122w\", \"/software-engineering-book-club/static/4836f78b8cbd2060ef56fa8bb0e841e4/b43c0/bf_case4.png 2826w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.youtube.com/watch?v=V3pzxngeLqw\"\n  }, \"Bytebytego\")), mdx(\"p\", null, \"bloom filter \\u8A2D\\u8A08\\u4E0A\\u8981\\u8003\\u616E\\u7684\\u554F\\u984C\\u6709\\uFF1A\\u5982\\u4F55\\u6C7A\\u5B9A bit array \\u5927\\u5C0F\\uFF08bit \\u6578\\uFF09\\u3001\\u8981\\u5E7E\\u500B hash functions\\u3001\\u4E8B\\u5148\\u8981\\u6709\\u591A\\u5C11\\u6578\\u64DA\\u7528\\u4EE5\\u521D\\u59CB\\u5316 bit array\\u3001\\u53EF\\u5BB9\\u8A31\\u7684\\u8AA4\\u5224\\u7387\\u662F\\u591A\\u5C11...\"), mdx(\"p\", null, \"\\u6578\\u5B78\\u516C\\u5F0F\\u53EF\\u53C3\\u8003 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://zhuanlan.zhihu.com/p/140545941\"\n  }, \"ref\")), mdx(\"hr\", null), mdx(\"p\", null, \"\\u4E0A\\u65B9\\u8457\\u91CD\\u5728\\u4F9D\\u7167\\u73FE\\u6709\\u6578\\u64DA\\u5EFA\\u7ACB\\u597D\\u4E00 bit array \\u5F8C\\u9032\\u884C\\u9AD8\\u6548\\u3001\\u53EF\\u5BB9\\u8A31\\u4E9B\\u5FAE\\u932F\\u8AA4\\u7684\\u67E5\\u8A62\\uFF0C\\u4F46\\u8A72\\u8A2D\\u8A08\\u65B9\\u6CD5\\u7121\\u6CD5\\u522A\\u9664\\u8CC7\\u6599\\uFF0C\\u56E0\\u70BA\\u53EF\\u80FD\\u6703\\u52D5\\u5230\\u5176\\u4ED6\\u6578\\u64DA\\u7684\\u7D50\\u679C\\uFF0C\\u56E0\\u6B64\\u4E00\\u500B\\u6539\\u826F\\u7684\\u65B9\\u6CD5\\u662F bit array \\u7684\\u6BCF\\u4E00\\u500B\\u503C\\u8B8A\\u6210 counter\\uFF08\\u5982\\u4E0B\\u5716\\uFF09\\uFF0C\\u7576\\u4ECA\\u5929\\u8981\\u522A\\u9664\\u67D0\\u6578\\u64DA\\u6642\\uFF0C\\u76F4\\u63A5\\u628A\\u5C0D\\u61C9\\u7684 index \\u5011 counter -= 1\\uFF0C\\u9019\\u6A23\\u5982\\u679C\\u67D0 index \\u7684\\u503C\\u88AB\\u6263\\u5230 0\\uFF0C\\u90A3\\u4EE3\\u8868\\u6709\\u88AB\\u6620\\u5C04\\u5230\\u8A72 index \\u7684\\u6578\\u64DA\\u4E00\\u5B9A\\u4E0D\\u5B58\\u5728\\uFF0C\\u9019\\u7A2E\\u6539\\u826F\\u6CD5\\u7A31\\u70BA Counting Bloom Filter\"), mdx(\"p\", null, \"\\u7F3A\\u9EDE\\u662F\\u5132\\u5B58\\u7A7A\\u9593\\u9700\\u6C42\\u589E\\u52A0\\uFF0C\\u539F\\u672C bit array \\u6BCF\\u4E00\\u4F4D\\u53EA\\u9700\\u8981 1 bit\\uFF0C\\u73FE\\u5728\\u63DB\\u6210 counter\\uFF0C\\u5047\\u8A2D\\u7528 int \\u7684\\u8A71\\u662F 4 bytes\\uFF0C\\u5132\\u5B58\\u7A7A\\u9593\\u9700\\u6C42\\u76F4\\u63A5 \", \"*\", \" 32\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"31.428571428571427%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVQY021R227FIAzr/3/itoczaXuAQmm4lUvBEymVqukgWTiJcQIs1lo47xFDgPcBPgQE5p7hnOO6t3Txf/BEcNZi+Az9EmOElBJm0/gRBr9CM1/XFVpfu1IK318vSCGZD72aNf35ASUEhJSsX1prOM9zoiGXiiMVpFzQWgfXc0Y6MlKu6L0zas4ox4FWCp4eC96sYVyn+aY1aDOcH7HeDBztyDGinSfnR4N7LXfHJ4BLUGuFcxbBOZ5oTL0bw2/XpsnTjA2fQX+Ibr7ZBE0H+rx+H1el/T7AufEZRMSf8gceDdLZI+0QkQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"cbf\",\n    \"title\": \"cbf\",\n    \"src\": \"/software-engineering-book-club/static/cd8c5d6d9e42d2f7a7996fe6ffe98eb4/410f3/cbf.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/cd8c5d6d9e42d2f7a7996fe6ffe98eb4/0d3e1/cbf.png 140w\", \"/software-engineering-book-club/static/cd8c5d6d9e42d2f7a7996fe6ffe98eb4/6b1e2/cbf.png 281w\", \"/software-engineering-book-club/static/cd8c5d6d9e42d2f7a7996fe6ffe98eb4/410f3/cbf.png 561w\", \"/software-engineering-book-club/static/cd8c5d6d9e42d2f7a7996fe6ffe98eb4/99072/cbf.png 842w\", \"/software-engineering-book-club/static/cd8c5d6d9e42d2f7a7996fe6ffe98eb4/0a867/cbf.png 986w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.tencent.com/developer/article/1136056\"\n  }, \"source\")), mdx(\"hr\", null), mdx(\"h4\", {\n    \"id\": \"base-62-conversion\"\n  }, \"Base 62 conversion\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/d4e7f/base62.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"76.42857142857143%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkUlEQVQ4y52UDW+bMBCG+/9/3LotmVJtXRq1DWDAQAwm+POZTGmTdlur5qRXnPHdY96zxJUPkSlETAATwUaIMQJJaR3prKc1Ds8pQlz6Ii+afOCq1BOi7Sialn1Vs6sbRuuwzpGrgQfZIKXkoBS/C4HUI7rvyZVGdIpy6c2rmrzXXFX6yGNVc19W3GU527KegZOxCDWwKysKIZBty68spx2P9EqRHzSi6Sjqmqyq2RcCkYDP1l5FjE+C2WZrPK11ryqT5dEHjiEuWiyneYUQ/qsUfd8zav0EWt7HtDcfHM4UT8C34LQ23jM6TzMalHFz7vzftS96C3xWWE5vjWUvW76s1lyv1mRNh7J+3vtXT/wI2FuHPFp2oprBzWTR1n0eeA5NYUI8Xcg79R9/YbLcHLjdC7aZmPM0x4stt5MlryWbmxt+bDaU3YHOuMuA6Wl9YHCeWh/pJjPn57f8aaDxATUZ8q6nVMM8gouBLD+FTDZ8/b7i22qNHDSHSy2npsE6bh8euV6v+bm9Y5cXjC68C/wDqIuVXy+IfRoAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"base62\",\n    \"title\": \"base62\",\n    \"src\": \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/410f3/base62.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/0d3e1/base62.png 140w\", \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/6b1e2/base62.png 281w\", \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/410f3/base62.png 561w\", \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/99072/base62.png 842w\", \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/62a6a/base62.png 1122w\", \"/software-engineering-book-club/static/3b90a6016589d3b2b67e936284755b23/d4e7f/base62.png 1416w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u5148\\u6839\\u64DA\\u7AE0\\u7BC0 7 \\u7684\\u552F\\u4E00 ID \\u751F\\u6210\\u5668\\u751F\\u51FA\\u7D14\\u6578\\u5B57 UUID \\u5F8C\\uFF0C\\u5C07\\u4E4B\\u8F49\\u70BA 62 \\u9032\\u4F4D\\uFF0C\\u5982\\u5F97\\u5230\\u7684 UUID \\u70BA 11,157\\uFF0C\\u5C0D\\u61C9\\u7684 62 \\u9032\\u4F4D\\u7B97\\u6CD5\\u70BA\\uFF1A\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/7db30/base62_example.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"55.714285714285715%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVQoz31S7W6DMAzk/Z9w+1WpBBgDukISyIfjm2xKR6dpkU5xLvbZiV0BQCSCSxk+0SsyITAQGQgF8CljK4yEndt51l35UlAVZriYwMwAM5jLboORU0J9vcLUNT77Xu8/uk65xhjU9RXjOKBtGjSNwc35XTAQgcshBJRSIDyVAu+9Yl1X5dZ1g7UWzjk477Ftm9rbusLGhEoEPqYJN8HtBmMMSBJotaz2NE3PROelSU6cy4RKglyIsHbBMAwqmlJ6ETwCz5C7GKPeH2fpgz55I8I4DJjnGV3XqcBRZc5ZKxT7t6A89/DDi2DO6iQViqA4HkE5k57/EyxPQdoFZRykKfLZ0s1lWdRZnAoRQgiPCeCfHVBe//DBW6kQLPOVdHRiYYzzgi/rYEOEj0kRqCjWlF+wZXraLiUEaQp+LX7gfL4aoxjGUUfpQD7Z9PiGar7fYZoGbdvqwHZti77vcblc1JbhrWuD9/c35TUJM/5aIvgNqc9aO4HiB1IAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"base62 example\",\n    \"title\": \"base62 example\",\n    \"src\": \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/410f3/base62_example.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/0d3e1/base62_example.png 140w\", \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/6b1e2/base62_example.png 281w\", \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/410f3/base62_example.png 561w\", \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/99072/base62_example.png 842w\", \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/62a6a/base62_example.png 1122w\", \"/software-engineering-book-club/static/cc7131894e953299a5702b9603969130/7db30/base62_example.png 1494w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"p\", null, \"\\u5169\\u500B\\u65B9\\u6CD5\\u7684\\u6BD4\\u8F03\\u8868\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/1e5d2/comparison.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"69.28571428571428%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABs0lEQVQ4y3WTiY6CQAyG5/1fjoR44AXiiSBe4I3WfN2UjJvdSWrr0OPv346bzWbS7/cljmMZj8cymUxUDwYDieNE7ve7PJ/PH9008n6/W/nruPV6LcvlUlarlWw2G9Vpmgr3i8VC8jzXO6Sqqq/gpmm+5PV6iSMJKEkAMgJBO5/PFdnj8ZDr9SrD4VDvkySR0WikxUBtcrvdpK5rcVmWKUI0iQ3tbreTy+WijqfTSRMURaFd4AOA4/Eoh8NBv+/3e/3vMEhGa9g4koxDCxySgioMQ+l2u1rQYvDfbrcKRhPyAzfA9TWVEb6DAHQUJBiN3/l8bmMoiu1wtBYQKoOAOxNaByHo4Jb2uSe50QXP+DnLDrF2iTZhMCAkEP6w8Tdf3+abDqXX6ykHVGdlDCEJ4JEgJjydTvUOjb8NkbgWYVmWmgA+/jskJBDuOP5Sm43WhPBGdfaMFxNFkb4SBBu+aAVU7ClcItjEsJfmS0EH3CAIlHAcbRAksvWAZwI6nY4GkwjNf3um7dqwGuwdKODB4PvCwPCBFlsjNIiIR+OjLfscMIDf75OnR1ugZuJ+QZ9DYnnLH9eEIhSRxS8cAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"comparison\",\n    \"title\": \"comparison\",\n    \"src\": \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/410f3/comparison.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/0d3e1/comparison.png 140w\", \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/6b1e2/comparison.png 281w\", \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/410f3/comparison.png 561w\", \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/99072/comparison.png 842w\", \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/62a6a/comparison.png 1122w\", \"/software-engineering-book-club/static/821e7c8e5da7c7581161d776f6b842c3/1e5d2/comparison.png 1630w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"h3\", {\n    \"id\": \"url-重導向redirecting\"\n  }, \"URL \\u91CD\\u5C0E\\u5411\\uFF08redirecting\\uFF09\"), mdx(\"span\", {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"561px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/2adcb/redirect_flow.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"35%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABPklEQVQoz32Qy0oEMRBF579d+Q/+gbpyJehaBcEXgoqIC9E46gz2Iz1JuvPo7uRIt44vxIIiVUXdU5dMyrpBWYdygbpt8T6QFQVFWVJKOeZrnuNCIKZIpiwi0wQfUE5zMt3lRQmGiDEyKeqG6eMjd/cPZMpgvae2lkppKqVYaEPjPLXzg4SD62fWdq+w1vMkn9g8XeXy5XAE9rFj4vuIch4TWuRCIaVEygohBA9CMJ/PqaoKYwwpJRZKkeUFXddhnScrDco09DG+OyQlII0XUoqjKKX3fhkp/j1faI1vw/guGZNhKX7Q44fos/+Vg4shLqYl2+dTKhfG/Tq0bJ0Iju6yL+B/oE+nw0ESotCsrB+zdzMb57br2Tm7Z2P/9ifwey5hQ53nObPZDO/9+ENd7KmMQrswXKHtI7Wt0Y3hDZo8GkhNcrkAAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"redirect flow\",\n    \"title\": \"redirect flow\",\n    \"src\": \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/410f3/redirect_flow.png\",\n    \"srcSet\": [\"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/0d3e1/redirect_flow.png 140w\", \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/6b1e2/redirect_flow.png 281w\", \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/410f3/redirect_flow.png 561w\", \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/99072/redirect_flow.png 842w\", \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/62a6a/redirect_flow.png 1122w\", \"/software-engineering-book-club/static/bfdd0cc19ddbfc3a682d48be57c6acb4/2adcb/redirect_flow.png 1984w\"],\n    \"sizes\": \"(max-width: 561px) 100vw, 561px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"h2\", {\n    \"id\": \"步驟四總結\"\n  }, \"\\u6B65\\u9A5F\\u56DB\\uFF1A\\u7E3D\\u7D50\"), mdx(\"p\", null, \"\\u5EF6\\u4F38\\u53EF\\u8A0E\\u8AD6\\u7684\\u9EDE\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Rate limiter\\uFF1A\\u907F\\u514D\\u60E1\\u610F\\u4F7F\\u7528\\u8005\\u704C\\u7206\\u670D\\u52D9\\uFF0C\\u898B\\u7B2C\\u56DB\\u7AE0\\u7B46\\u8A18\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Web server scaling\\uFF1A\\u56E0\\u70BA\\u6B64\\u670D\\u52D9\\u4E0D\\u9700\\u7D00\\u9304\\u72C0\\u614B\\uFF0C\\u6240\\u4EE5 web server \\u53EF\\u8F15\\u6613 auto-scale\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Database scaling\\uFF1ADatabase replication and sharding\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Analytics\\uFF1A\\u7D50\\u5408\\u5206\\u6790\\u5DE5\\u5177\\u4F86\\u6536\\u96C6\\u9EDE\\u64CA\\u91CF\\u3001\\u4F55\\u6642\\u9EDE\\u64CA\\u3001\\u8F49\\u5316\\u7387\\u7B49\\u7B49\\u5546\\u696D\\u9762\\u9700\\u8981\\u77E5\\u9053\\u7684\\u6578\\u64DA\\uFF0C\\u9664\\u4E86\\u4E0A\\u8FF0\\u63D0\\u5230\\u7684\\u8B93\\u6D41\\u91CF\\u7D93\\u904E\\u77ED\\u7DB2\\u5740\\u4F3A\\u670D\\u5668\\u6642\\u6536\\u96C6\\uFF0C\\u52A0\\u5165\\u5206\\u6790\\u5DE5\\u5177\\u5F8C\\u4E5F\\u6703\\u8B93\\u7DB2\\u5740\\u8B8A\\u5F88\\u9577\\uFF08UTM tracking\\uFF09\\uFF0C\\u9019\\u6642\\u77ED\\u7DB2\\u5740\\u670D\\u52D9\\u5C31\\u66F4\\u91CD\\u8981\\u4E86\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Availability, consistency, and reliability\\uFF0C\\u898B\\u7B2C\\u4E00\\u7AE0\\u7B46\\u8A18\"))));\n}\n;\nMDXContent.isMDXComponent = true;","rawBody":"# 第八章：設計短網址生成器\n\n## 前言\n\n本篇會介紹如何設計一短網址生成器，主要探討 hash 映射函數的設計（for URL shortening）以及從短網址拿到完整網址後的 URL 重導向（redirecting）\n\n## 步驟一：需求範圍確認\n\nQ: 可以舉個例子說明此短網址服務的運作嗎\n\nA: 假設 https://www.systeminterview.com/q=chatsystem&c=loggedin&v=v3&l=long 為原始網址，此服務會創建一縮短版本（alias），如 https://tinyurl.com/y7keocwj ，如點擊此 alias，會將你重導向至原始網址\n\nQ: 服務要支援多大流量規模\n\nA: 每天 100 million 個網址\n\nQ: 短網址長度是否有限制\n\nA: 越短越好\n\nQ: 生成的短網址是否有符號限制\n\nA: 需全為數字或英文（0-9 & a-z & A-Z）\n\nQ: 短網址是否可被刪除或更新\n\nA: 可假設不會被刪除或更新\n\n### 需求總結\n\n1. URL shortening：給一長網址 -> 回傳短網址\n2. URL redirecting：給一短網址 -> 回傳長網址並重導向\n3. 高可用性、擴展性、錯誤容許\n\n### 系統規格估算\n\n- 寫入量：100 million 個網址 / 日\n\n- 每秒寫入量：100 million / 24 / 3600 = 1160\n\n- 讀取量：假設讀寫比為 10 : 1，每秒讀取量為 1160 x 10 = 11,600\n\n- 假設此服務會運作 10 年，總網址量為 100 million x 365 x 10 = 365 billion\n\n- 假設平均一個網址長度為 100 bytes\n\n- 10 年的規格上限為 365 billion x 100 bytes x 10 years = 365 TB\n\n## 步驟二：high-level 架構\n\n### API Endpoints\n\n1. URL shortening\n\nREST API 範例如：\n\n```\nPOST api/v1/data/shorten\n\n- request parameter: {longUrl: longURLString}\n- return shortURL\n```\n\n假設縮短後的網址格式如：\n\n```\nwww.tinyurl.com/{hashValue}\n```\n\n我們需設計一 hash 函數來將長網址對應成短網址，需符合兩條件\n\n- 每一長網址對應唯一的短網址字串（即上面的 hashValue）\n- 每一 hashValue 可對應回去長網址\n\n2. URL redirecting\n\nREST API 範例如：\n\n```\nGET api/v1/shortUrl\n\n- Return longURL for HTTP redirection\n```\n\n重導向流程可見下圖\n\n![](assets/redirect.png)\n\n301 vs 302 重導向\n\n301 為永久轉址，302 為暫時轉址，如果想減少伺服器負擔，用 301，因為能 cache 在瀏覽器端，不會再向短網址伺服器發送請求；但如果 analytics 很重要，用 302，因為有經過短網址伺服器才能追蹤流量、分析行銷成效等等\n\n## 步驟三：深入探討\n\n### 資料結構\n\n![](assets/ds.png)\n\n### hash 函數（for URL shortening）\n\n選擇合適的 hash 函數前，我們需要先估算 hashValue 的最小長度，每一 hashValue 裡的字元可為 [0-9, a-z, A-Z]，有 10 + 26 + 26 = 62 個選項，因上限的總網址量為 365 billion 筆，hashValue 的最小長度為 minimum n that can make 62^n ≥ 365 billion，可算出 n = 7 時可符合條件，因此 hashValue 的最小長度為 7\n\n兩種設計 hash 函數的方法：\n\n1. 使用知名的 hash functions + 碰撞處理\n2. Base 62 conversion\n\n#### 知名 hash functions + 碰撞處理\n\n![](assets/hash_with_collision.png)\n\n用知名的 hash 演算法，如 CRC32、MD5、SHA-1...，缺點為 hash 出來的字串太長，以及還需要向資料庫確認是否有碰撞，會降低效能，一個提高檢查效率的改進方式為應用 Bloom filter（見下方備註），雖有可能產生 false positive，但在此應用情境下可容忍\n\n_註：Bloom filter 介紹_\n\n為了確認資料是否重複，可以用以下幾種方式：\n\n1. 直接把資料丟到資料庫，由資料庫執行去重 (Deduplication)\n2. 開一個夠大的 hash table，把資料丟進去看是否已存在\n3. 建一個 bit array，將資料由一個 hash function 映射出一 unsigned int，將該數字作為 bit array 的 index 並填入 1\n\n方法 1 在資料量很大時會嚴重拖垮資料庫效能，且每多一筆資料就要查詢一次資料庫太浪費\n\n方法 2 在資料量很大時會很耗費記憶體空間\n\n方法 3 可能會有 hash collision 問題\n\n由上可知方法 1, 2 不適用資料量大時的情境，我們可以改良方法 3，既然一個 hash function 可能會有 collision，那我們就多加幾個 hash function 產生多個 unsigned int index，若一資料全部對應的 bit array index 的值不都為 1，則他一定不存在（definitely no）；若都為 1，因為有可能是其他資料貢獻的，所以可能存在（probably yes），此即為 bloom filter 的核心概念\n\n簡易範例\n\n![](assets/bf_example.png)\n\nBloom filter 說沒有該資料的話**一定**沒有，說有該資料的話**不一定**有（definitely no and probably yes）\n\n適用情境\n\n![](assets/bf.png)\n\n使用案例（_允許些微出錯的可能性，不一定要 100% 準確_）\n\n1. Database\n\n利用 Bloom Filter 來初篩該資料是否存在於某個 Partition\n\n![](assets/bf_case1.png)\n\n2. CDN\n\nAkamai cdn 上有 75% 的網址只被訪問過一次，這種冷門的網址不需收錄進去 cdn 節省空間，也因此降低快取的負擔、提高 cache hit 機率\n\n![](assets/bf_case2.png)\n\n3. 惡意網址檢測\n\n![](assets/bf_case3.png)\n\n4. 弱密碼檢測\n\n![](assets/bf_case4.png)\n\n[Bytebytego](https://www.youtube.com/watch?v=V3pzxngeLqw)\n\nbloom filter 設計上要考慮的問題有：如何決定 bit array 大小（bit 數）、要幾個 hash functions、事先要有多少數據用以初始化 bit array、可容許的誤判率是多少...\n\n數學公式可參考 [ref](https://zhuanlan.zhihu.com/p/140545941)\n\n---\n\n上方著重在依照現有數據建立好一 bit array 後進行高效、可容許些微錯誤的查詢，但該設計方法無法刪除資料，因為可能會動到其他數據的結果，因此一個改良的方法是 bit array 的每一個值變成 counter（如下圖），當今天要刪除某數據時，直接把對應的 index 們 counter -= 1，這樣如果某 index 的值被扣到 0，那代表有被映射到該 index 的數據一定不存在，這種改良法稱為 Counting Bloom Filter\n\n缺點是儲存空間需求增加，原本 bit array 每一位只需要 1 bit，現在換成 counter，假設用 int 的話是 4 bytes，儲存空間需求直接 \\* 32\n\n![](assets/cbf.png)\n[source](https://cloud.tencent.com/developer/article/1136056)\n\n---\n\n#### Base 62 conversion\n\n![](assets/base62.png)\n\n先根據章節 7 的唯一 ID 生成器生出純數字 UUID 後，將之轉為 62 進位，如得到的 UUID 為 11,157，對應的 62 進位算法為：\n\n![](assets/base62_example.png)\n\n兩個方法的比較表\n\n![](assets/comparison.png)\n\n### URL 重導向（redirecting）\n\n![](assets/redirect_flow.png)\n\n## 步驟四：總結\n\n延伸可討論的點：\n\n- Rate limiter：避免惡意使用者灌爆服務，見第四章筆記\n\n- Web server scaling：因為此服務不需紀錄狀態，所以 web server 可輕易 auto-scale\n\n- Database scaling：Database replication and sharding\n\n- Analytics：結合分析工具來收集點擊量、何時點擊、轉化率等等商業面需要知道的數據，除了上述提到的讓流量經過短網址伺服器時收集，加入分析工具後也會讓網址變很長（UTM tracking），這時短網址服務就更重要了\n\n- Availability, consistency, and reliability，見第一章筆記\n","excerpt":"第八章：設計短網址生成器 前言 本篇會介紹如何設計一短網址生成器，主要探討 hash 映射函數的設計（for URL shortening）以及從短網址拿到完整網址後的 URL 重導向（redirecting） 步驟一：需求範圍確認 Q: 可以舉個例子說明此短網址服務的運作嗎 …","outboundReferences":[],"inboundReferences":[]},"tagsOutbound":{"nodes":[]}},"pageContext":{"tags":[],"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","sidebarItems":[{"title":"Categories","items":[{"title":"Content","url":"","items":[{"title":"Domain-Driven-Design","url":"","items":[{"title":"Domain-Modeling-Made-Functional","url":"/content/domain-driven-design/domain-modeling-made-functional/","items":[{"title":"Chapter-1","url":"","items":[{"title":"Domain Driven Design Made Functional","url":"/content/domain-driven-design/domain-modeling-made-functional/chapter-1/chpater_1/","items":[]}]}]}]},{"title":"Front-End","url":"","items":[{"title":"微前端","url":"/content/front-end/micro-frontend/","items":[]}]},{"title":"System-Design","url":"","items":[{"title":"System-Design-Interview-Alex-Xu-Volume1","url":"/content/system-design/system-design-interview-alex-xu-volume1/","items":[{"title":"Chapter-1","url":"","items":[{"title":"第一章：使用者人數 -- 從零到百萬規模","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-1/chapter_1/","items":[]}]},{"title":"Chapter-10","url":"","items":[{"title":"Demo","url":"","items":[{"title":"React + TypeScript + Vite","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/demo/client/","items":[]}]},{"title":"design pattern (notification)","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/chapter_10/","items":[]}]},{"title":"Chapter-4","url":"","items":[{"title":"第四章：設計網路限速器","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-4/chapter_4/","items":[]}]},{"title":"Chapter-7","url":"","items":[{"title":"第七章：設計可用於分散式系統的唯一 ID 生成器","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","items":[]}]},{"title":"Chapter-8","url":"","items":[{"title":"第八章：設計短網址生成器","url":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","items":[]}]}]}]}]},{"title":"software-engineering-book-club","url":"/","items":[]}]}],"tagsGroups":[],"latestPosts":[{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/","title":"System-Design-Interview-Alex-Xu-Volume1","lastUpdatedAt":"2023-10-22T13:09:03.000Z","lastUpdated":"10/22/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/chapter_10/","title":"design pattern (notification)","lastUpdatedAt":"2023-09-02T03:25:17.000Z","lastUpdated":"9/2/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-10/demo/client/","title":"React + TypeScript + Vite","lastUpdatedAt":"2023-09-02T03:25:17.000Z","lastUpdated":"9/2/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/domain-driven-design/domain-modeling-made-functional/chapter-1/chpater_1/","title":"Domain Driven Design Made Functional","lastUpdatedAt":"2023-07-30T09:05:36.000Z","lastUpdated":"7/30/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-8/chapter_8/","title":"第八章：設計短網址生成器","lastUpdatedAt":"2023-07-28T02:25:02.000Z","lastUpdated":"7/28/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-7/chapter_7/","title":"第七章：設計可用於分散式系統的唯一 ID 生成器","lastUpdatedAt":"2023-07-07T03:07:23.000Z","lastUpdated":"7/7/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/","title":"software-engineering-book-club","lastUpdatedAt":"2023-07-06T14:43:04.000Z","lastUpdated":"7/6/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/domain-driven-design/domain-modeling-made-functional/","title":"Domain-Modeling-Made-Functional","lastUpdatedAt":"2023-07-06T07:45:19.000Z","lastUpdated":"7/6/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/front-end/micro-frontend/","title":"微前端","lastUpdatedAt":"2023-07-05T02:50:46.000Z","lastUpdated":"7/5/2023"},"frontmatter":{"draft":false,"tags":[]}},{"fields":{"slug":"/content/system-design/system-design-interview-alex-xu-volume1/chapter-1/chapter_1/","title":"第一章：使用者人數 -- 從零到百萬規模","lastUpdatedAt":"2023-06-22T13:53:44.000Z","lastUpdated":"6/22/2023"},"frontmatter":{"draft":false,"tags":[]}}]}},
    "staticQueryHashes": ["2230547434","2320115945","3495835395","451533639"]}